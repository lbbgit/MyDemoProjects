function webSocketMsg(){this._msg_len=this._msg_start=this._msg=0;this._msg_line="";this._sch=String.fromCharCode(31);this._cmd="\u0003";this._page=[];this._sub_page=this._current_page=0;this._is_in_home=1;this._max_xdz=10;this._check_rooms=this._page_scrollTopEanble=this._page_scrollTop=this._g_must_score=0;this._room_min_y=this._room_min_x=1E9;this._room_max_y=this._room_max_x=-1E9;this._now_sj_type=0;this._now_jm_type="chong";this._now_sort_type="score";this._cangjian_type="cangjian";this.clear_msg=
function(){this._msg_len=this._msg_start=this._msg=0;this._msg_line=""};this.sub_buffer=function(c,a,b){if(a>b)return null;c=new Uint8Array(c);if(a>=c.length)return null;b>c.length-1&&(b=c.length-1);for(var d=new ArrayBuffer(b-a+1),e=new Uint8Array(d),f=0;a<=b;a++,f++)e[f]=c[a];return d};this.search_buffer=function(c,a){for(var b=new Uint8Array(c),d=0;d<b.length;d++)if(b[d]==a)return d;return-1};this.writeUTF=function(c,a){for(var b=[],d=0,e=0;e<c.length;e++){var f=c[e];if(0<=f&&127>=f)d+=1,b.push(f);
else if(128<=f&&2047>=f)d+=2,b.push(192|31&f>>6),b.push(128|63&f);else if(2048<=f&&55295>=f||57344<=f&&65535>=f)d+=3,b.push(224|15&f>>12),b.push(128|63&f>>6),b.push(128|63&f)}for(e=0;e<b.length;e++)b[e]&=255;return a?b:255>=d?[0,d].concat(b):[d>>8,d&255].concat(b)};this.arrayToString=function(c){for(var a="",b=0;b<c.length;b++)a+=String.fromCharCode(c[b]);return a};this.addMessage=function(c){var a;if(this._msg){a=new Uint8Array(this._msg);for(var c=new Uint8Array(c),b=new ArrayBuffer(a.length+c.length),
d=new Uint8Array(b),e=0;e<a.length;e++)d[e]=a[e];for(e=0;e<c.length;e++)d[e+a.length]=c[e];this._msg=b}else this._msg=c;for(a=new Uint8Array(this._msg);a&&0<a.length;){if(0==this._msg_start){if(127!=a[0]){this._msg=this.sub_buffer(this._msg,1,a.length);a=new Uint8Array(this._msg);continue}this._msg_start=1;a=(this._msg=this.sub_buffer(this._msg,1,a.length))?new Uint8Array(this._msg):null}if(0==this._msg_len){if(5>a.length)break;this._msg_len=1;a=(this._msg=this.sub_buffer(this._msg,5,a.length))?new Uint8Array(this._msg):
null}c=this.search_buffer(this._msg,this._sch.charCodeAt(0));if(-1==c)break;this._msg_line=this.sub_buffer(this._msg,0,c-1);a=(this._msg=this.sub_buffer(this._msg,c+1,a.length))?new Uint8Array(this._msg):null;this._msg_line&&(c=new Uint8Array(this._msg_line),0<c.length&&(this._msg_line=g_text_decoder.decode(c),this.recvNetWork(this._msg_line)));this._msg_len=this._msg_start=0}};this.addMessage2=function(c){this._msg||(this._msg="");for(this._msg+=c;0<this._msg.length;){if(0==this._msg_start){if(127!=
this._msg.charCodeAt(0)){this._msg=this._msg.substring(1);continue}this._msg_start=1;this._msg=this._msg.substring(1)}if(0==this._msg_len){if(5>this._msg.length)break;this._msg_len=1;this._msg=this._msg.substring(5)}c=this._msg.search(this._sch);if(-1==c)break;this._msg_line=this._msg.substring(0,c);this._msg=this._msg.substring(c);0<this._msg_line.length&&this.recvNetWork(this._msg_line);this._msg_len=this._msg_start=0}};this.recvNetWork=function(c){0<c.length&&(c=g_simul_efun.replaceControlChar(c),
(c=this.formatMessage(c))&&0<c.size()&&this.dispatchMessage(c))};this.formatMessage=function(c){for(var a=new Map,b,d;0<c.length;)if(b=c.indexOf("|"),1<=b?(d=c.substring(0,b),c=c.substring(b+1)):(d=c,c=""),b=d.indexOf(":"),1<=b){var e=d.substring(0,b);b=d.substring(b+1);0<b.length&&(d=(d=a.get(e))?d+("\n"+b):b,a.put(e,d))}return a};this.is_in_home=function(){return this._is_in_home};this.dispatchMessage=function(c){var a=c.get("type"),b=c.get("subtype"),d,e;g_gmain.hide_loading();if("main_msg"==a)(d=
c.get("msg"))&&g_gmain.recvNetWork2(d);else if("notice"==a){if(d=c.get("msg"))g_gmain.notify_fail(d),g_gmain.recvNetWork2(d)}else if("jh"==a)if("info"==b)g_obj_map.put("msg_room",c),this._is_in_home=0,this.show_room();else if("new_user"==b||"new_npc"==b||"new_item"==b||"dest_user"==b||"dest_npc"==b||"dest_item"==b||"new_cmd"==b||"dest_cmd"==b)this.change_room_object(c);else if("list"==b)g_obj_map.put("msg_jh_list",c),this.show_jh_list();else if("finish_quest"==b){g_obj_map.put("msg_finish_quest",
c);if("main_quest"==c.get("quest_type")&&(b=g_obj_map.get("msg_room")))b.remove("find_road_ok"),b.remove("findroad_id"),b.remove("findroad_type"),b.remove("findroad_id2"),b.remove("findroad_subtype");this.show_finish_quest()}else{if("new_road"==b&&(b=g_obj_map.get("msg_room")))b.remove("find_road_ok"),b.put("findroad_id",c.get("findroad_id")),b.put("findroad_type",c.get("findroad_type")),(e=c.get("findroad_subtype"))?b.put("findroad_subtype",e):b.remove("findroad_subtype"),(e=c.get("findroad_id2"))?
b.put("findroad_id2",e):b.remove("findroad_id2"),!g_gmain.is_fighting&&!g_gmain.is_reging&&this.show_room()}else if("family"==a)this._is_in_home=1,g_obj_map.put("msg_room",c),this.show_room();else if("home"==a)"index"==b&&(this._is_in_home=1,this.go_home());else if("attr"==a)g_obj_map.put("msg_attrs",c),0==parseInt(c.get("vs"))&&!c.get("watch")&&g_gmain.is_fighting&&(g_gmain.fight(0),this.show_room());else if("channel"==a)this.do_channel(c);else if("score"==a)(b=g_obj_map.get("msg_attrs"))&&b.get("id")==
c.get("id")?(g_obj_map.put("msg_score",c),this.show_score()):(g_obj_map.put("msg_user",c),this.show_user());else if("study"==a){if("suc"==b)if(b=c.get("id"),this.change_item(b,-1,-1,c)||g_obj_map.remove("msg_items"),"score"==this._current_page)"items"==this._sub_page&&this.show_items();else if("item_info"==this._current_page&&(b=g_obj_map.get("msg_item")))c=parseInt(c.get("amount")),b.put("amount",c),this.show_item_info()}else if("sell_ret"==a){if("suc"==b)if(b=c.get("id"),this.change_item(b,-1,-1,
c)||g_obj_map.remove("msg_items"),"score"==this._current_page)"items"==this._sub_page&&this.show_items();else if("item_info"==this._current_page&&(b=g_obj_map.get("msg_item")))c=parseInt(c.get("amount")),b.put("amount",c),this.show_item_info()}else if("suc"==a)if(e=g_obj_map.get("msg_attrs"),"exercise 0"==b)e&&e.put("exercise",1),"score"==this._current_page&&"score_info"!=this._sub_page&&g_gmain.clickButton("score");else if(b&&-1!=b.indexOf("work do"))e&&(c=b.substring(8),e.put("work",c)),"work"==
this._current_page&&this.show_work();else if(b&&-1!=b.indexOf("items use")){if(this._g_must_score=1,d=b.split(" "),3<=d.length)if(b=d.slice(2).join(" "),this.change_item(b,-1,0)||g_obj_map.remove("msg_items"),"score"==this._current_page)"items"==this._sub_page&&this.show_items();else if("item_info"==this._current_page&&(b=g_obj_map.get("msg_item")))c=parseInt(b.get("amount"))-1,b.put("amount",c),this.show_item_info()}else if(b&&-1!=b.indexOf("work click")){d=b.split(" ");if(3<=d.length&&(c=g_obj_map.get("msg_work")))for(b=
1;e=c.get("work"+b);b++)if(e=g_simul_efun.isArray(e)?e:e.split(","),!(10>e.length)&&e[0]==d[2]){e[8]=e[9];c.put("work"+b,e);break}"work"==this._current_page&&this.show_work()}else b&&0==b.indexOf("enable")?(d=b.split(" "),2>d.length?g_obj_map.remove("msg_skills"):2==d.length?this.change_skill(d[1],0,0,1)||g_obj_map.remove("msg_skills"):"none"==d[2]?this.change_skill(d[1],0,0,-1)||g_obj_map.remove("msg_skills"):this.change_skill(d[2],0,0,1)||g_obj_map.remove("msg_skills"),"skills"==this._current_page?
this.show_skills(0,this._sub_page):"master_skills"==this._current_page&&this.show_master_skills()):b&&0==b.indexOf("practice")?(d=b.split(" "),2<=d.length&&e&&e.put("practice_skill",d[1])):b&&0==b.indexOf("chuaimo")?(d=b.split(" go,"),2<=d.length&&e&&e.put("chuaimo_skill",d[1])):b&&(0==b.indexOf("wield")||0==b.indexOf("wear"))?(d=b.split(" "),2<=d.length&&(this._g_must_score=1,b=d.slice(1).join(" "),this.change_item(b,0,1)||g_obj_map.remove("msg_items"),"score"==this._current_page&&"items"==this._sub_page&&
this.show_items())):b&&(0==b.indexOf("unwield")||0==b.indexOf("remove"))?(d=b.split(" "),2<=d.length&&(this._g_must_score=1,b=d.slice(1).join(" "),this.change_item(b,0,0)||g_obj_map.remove("msg_items"),"score"==this._current_page&&"items"==this._sub_page&&this.show_items())):b&&0==b.indexOf("items")?(d=b.split(" "),3<=d.length&&(d.slice(2).join(" "),"get_store"==d[1]&&g_obj_map.remove("msg_items"),"put_store"==d[1]&&g_obj_map.remove("msg_items"),"score"==this._current_page&&"items"==this._sub_page&&
this.show_items())):b&&0==b.indexOf("team")&&"team"==this._current_page&&g_gmain.clickButton("team");else if("exercise"==a)e=g_obj_map.get("msg_attrs"),"stop_exercise"==b&&(e&&e.remove("exercise"),"score"==this._current_page&&"score_info"!=this._sub_page&&g_gmain.clickButton("score"));else if("practice"==a)if(e=g_obj_map.get("msg_attrs"),"stop_practice"==b)e&&e.remove("practice_skill");else{if("lvl_up"==b){if((b=g_obj_map.get("msg_skill"))&&b.get("id")==c.get("sid"))b.put("lvl",c.get("lvl")),"skill_info"==
this._current_page&&this.show_skill_info();this.change_skill(c.get("sid"),c.get("lvl"),c.get("lvl_desc"),0)||g_obj_map.remove("msg_skills");"skills"==this._current_page&&this.show_skills(0,this._sub_page)}}else if("chuaimo"==a)if(e=g_obj_map.get("msg_attrs"),"stop_chuaimo"==b)e&&e.remove("chuaimo_skill");else{if("lvl_up"==b){if((b=g_obj_map.get("msg_skill"))&&b.get("id")==c.get("sid"))b.put("lvl",c.get("lvl")),"skill_info"==this._current_page&&this.show_skill_info();this.change_skill(c.get("sid"),
c.get("lvl"),c.get("lvl_desc"),0)||g_obj_map.remove("msg_skills");"skills"==this._current_page&&this.show_skills(0,this._sub_page)}}else if("attrs_changed"==a)this.attrsChanged(c);else if("learn"==a){if("skill_info"==this._current_page){if((b=g_obj_map.get("msg_skill"))&&b.get("id")==c.get("sid"))b.put("my_lvl",c.get("lvl")),this.show_skill_info();this.change_skill(c.get("sid"),c.get("lvl"),c.get("lvl_desc"),0)||g_obj_map.remove("msg_skills")}}else if("look_npc"==a)g_obj_map.put("msg_npc",c),this.show_npc();
else if("look_item"==a)g_obj_map.put("msg_item",c),this.show_item();else if("skills"==a)"list"==b?(g_obj_map.put("msg_skills",c),this.show_skills()):"info"==b&&(g_obj_map.put("msg_skill",c),this.show_skill_info());else if("remove_msg"==a)b&&g_obj_map.remove(b);else if("shop"==a)if("list"==b)g_obj_map.put("msg_shops",c),this.show_shops();else if("money_shop_list"==b)g_obj_map.put("msg_shops",c),this.show_shops();else if("score_shop_list"==b)g_obj_map.put("msg_shops",c),gSocketMsg2.show_score_shops();
else if("gift_shop_list"==b)g_obj_map.put("msg_shops",c),this.show_shops();else if("xf_shop_list"==b)g_obj_map.put("msg_shops",c),gSocketMsg2.show_xf_shops();else{if("add_day_buy"==b&&(e=g_obj_map.get("msg_shops"))&&"money_shop_list"==e.get("subtype"))for(b=1;;b++){d=e.get("item"+b);if(!d)break;d=d.split(",");if(!(6>d.length)&&d[0]==c.get("item_id")){d[5]=c.get("num");d.join(",");e.put("item"+b,d.join(","));break}}}else if("first_pay"==a){if(e=g_obj_map.get("msg_shops"))e.put("first_pay",c.get("cz")),
"shops"==this._current_page&&this.show_shops()}else if("day_pay"==a){if(e=g_obj_map.get("msg_shops"))e.put("day_pay",c.get("cz")),"shops"==this._current_page&&this.show_shops()}else if("chengzhang"==a)g_obj_map.put("msg_chengzhang",c),this.show_chengzhang();else if("day_pay_list"==a)g_obj_map.put("msg_day_pay",c),this.show_day_pay();else if("vip"==a)"main"==b?(g_obj_map.put("msg_vip",c),this.show_vip()):"info"==b?(g_obj_map.put("msg_skill",c),this.show_skill_info()):"pay_return_list"==b&&(g_obj_map.put("msg_pay_return_list",
c),this.show_pay_return());else if("team"==a)"info"==b&&(g_obj_map.put("msg_team",c),gSocketMsg2.show_team());else if("jm"==a)if("def"==b)g_obj_map.put("msg_jm_data",{def:c});else{if("sta"==b&&(b=g_obj_map.get("msg_jm_data")))b.sta=c,gSocketMsg2.show_jm()}else if("bind_mobile"==a)"check_bind"==b?gSocketMsg2.bm_check_bind(c):"send_code"==b?gSocketMsg2.bm_send_code(c):"check_code"==b&&gSocketMsg2.bm_check_code(c);else if("friend"==a)"list"==b&&(g_obj_map.put("msg_friend",c),gSocketMsg2.show_friend());
else if("rank"==a)"list"==b&&(g_obj_map.put("msg_ranks",c),this.rank_select());else if("swords"==a)if("main"==b)g_obj_map.put("msg_swords",c),this.show_swords();else if("select_member"==b)g_obj_map.put("msg_swords_select_member",c),this.show_swords_select_member();else if("shop_list"==b)g_obj_map.put("msg_swords_shop",c),this.show_swords_shops();else if("shop_buy_ret"==b){if(e=g_obj_map.get("msg_swords"))e.put("swords_score",c.get("swords_score")),this.show_swords_shop_info()}else"sorts"==b?(g_obj_map.put("msg_swords_sort",
c),this.show_swords_sorts()):"vs_list"==b&&(g_obj_map.put("msg_swords_vs_list",c),this.show_swords_vs_list());else if("buy"==a)"list"==b&&(g_obj_map.put("msg_buys",c),this.show_buys());else if("sort"==a)"sortinfo"==b?this.show_sort_info(c):(g_obj_map.put("msg_sorts",c),this.show_sorts(b));else if("enable"==a)"list"==b&&(g_obj_map.put("msg_enables",c),this.show_enables());else if("items"==a)"list"==b?(g_obj_map.put("msg_items",c),this.show_items()):"info"==b?(g_obj_map.put("msg_item",c),this.show_item_info()):
"info_store"==b?(g_obj_map.put("msg_item",c),this.show_item_info()):"remove_items"==b&&(g_obj_map.remove("msg_items"),this.show_item_info());else if("master_skills"==a)"list"==b?(g_obj_map.put("msg_master_skills",c),this.show_master_skills()):"info"==b&&(g_obj_map.put("msg_skill",c),this.show_skill_info());else if("work"==a)e=g_obj_map.get("msg_attrs"),"list"==b?(g_obj_map.put("msg_work",c),this.show_work()):"msg"==b?"work"==this._current_page&&(d=c.get("msg"))&&g_gmain.recvNetWork2(d):"stop_work"==
b&&(e&&e.remove("work"),"work"==this._current_page&&this.show_work());else if("vs"==a)if(e=g_obj_map.get("msg_attrs"),"vs_info"==b)g_gmain.is_fighting?((b=g_obj_map.get("msg_vs_info"))&&(b.get("is_watcher")&&!c.get("is_watcher"))&&c.put("is_watcher",b.get("is_watcher")),this.refresh_combat(c),g_obj_map.put("msg_vs_info",c),this.change_kee_text_pos()):(g_obj_map.put("msg_vs_info",c),this.go_combat());else if("combat_result"==b)g_obj_map.put("msg_combat_result",c),c=$("div#out"),g_obj_map.put("combat_text_msgs",
c.html()),this.finish_combat();else{if("die"!=b)if("out_watch"==b)g_gmain.is_fighting&&(this.remove_kee_text(),g_gmain.fight(0),this.show_room());else if("text"==b){if(d=c.get("msg"))g_gmain.is_fighting?(g_gmain.recvNetWork(d),c=$("div#out"),2==g_gmain.is_fighting&&600<c.children().length&&c.children("span.out:lt(300)").remove(),c.scrollTop(c.prop("scrollHeight"))):g_combat_chat&&(g_combat_msg+=d)}else if("attack"==b)this.change_kee(c);else if("lose_force"==b)this.change_force(c);else if("ready_skill"==
b)this.change_skill_button(c,0);else if("playskill"==b)0==parseInt(c.get("ret"))&&(e&&this.get_combat_user_id()==c.get("uid"))&&(b=parseInt(c.get("ready_pos")),1<=b&&4>=b&&(this.change_skill_button(0,b),c=parseInt(c.get("lose_xdz")),b=this.get_xdz(),0<=b&&(b-=c,0>b&&(b=0),this.change_xdz(b))));else if("add_xdz"==b)e&&this.get_combat_user_id()==c.get("uid")&&(b=parseInt(c.get("xdz")),0<=b&&this.change_xdz(b));else if("combat_all_info"==b&&e&&this.get_combat_user_id()==c.get("uid"))for(b=1;4>=b;b++)(d=
c.get("ready_skill"+b))?(d=d.split(","),4>d.length?this.change_skill_button(0,b):(e=new Map,e.put("type","vs"),e.put("subtype","ready_skill"),e.put("uid",c.get("uid")),e.put("vid",c.get("vid")),e.put("pos",b),e.put("skill",d[1]),e.put("name",d[2]),e.put("xdz",d[3]),this.change_skill_button(e,0))):this.change_skill_button(0,b)}else if("g_login"==a)"login_ret"==b?(b=parseInt(c.get("msg")),-2==b?g_gmain.reg(1):1==b&&(g_obj_map.put("msg_login_ret",c),g_gmain.reg(0),g_gmain.try_share(),g_gmain.check_wx_visit(),
g_gmain.clickButton("reg_url "+document.location.href))):"status"==b&&((b=c.get("area"))&&(g_area_id=b),g_obj_map.put("msg_status",c),g_gmain.login()),g_gmain.g_timeout_tm=1E5;else if("js_reg"==a){this.js_reg(c);if(b=c.get("auto_cmd"))(c=c.get("auto_sec"))&&g_gmain.addAutoCommand(b,parseInt(c));g_gmain.g_timeout_tm=1E5}else if("auto_cmd"==a){if(b=c.get("auto_cmd"))(c=c.get("auto_sec"))&&g_gmain.addAutoCommand(b,parseInt(c))}else if("wshop"==a)"user_count"==b?(g_obj_map.put("msg_wshop_user_count",
c),gSocketMsg2.show_wshop()):"cash"==b&&(g_obj_map.put("msg_wshop_cash",c),gSocketMsg2.show_wshop());else if("fb"==a)"list"==b&&(g_obj_map.put("msg_fb_list",c),this.show_fb_list());else if("cangjianlou"==a)"list"==b?(g_obj_map.put("msg_cangjianlou",c),this.show_cangjianlou()):"empty"==b&&g_obj_map.remove("msg_cangjianlou");else if("try_share"==a)(b=c.get("params_url"))&&(b=g_simul_efun.replace_special_msg4(b)),d=g_simul_efun.replace_special_msg4(c.get("share_url")),b+="&page_url="+encodeURIComponent(document.location.href),
g_gmain.g_params_url=b,g_gmain.g_share_link=d,g_gmain.g_facebook_appid=c.get("facebook_appid"),g_gmain.init_share();else if("show_html_page"==a)g_obj_map.put("msg_html_page",c),this.show_html_page();else if("disconnect"==a)"change"==b?(notify_fail("\u6709\u4eba\u53d6\u4ee3\u4e86\u4f60\u7684\u8fde\u7ebf\u3002\u5982\u8981\u91cd\u8fde\uff0c\u8bf7\u5237\u65b0\u6d4f\u89c8\u5668\u3002\n"),recvNetWork2(HIR+"\n\n!!!\u6709\u4eba\u53d6\u4ee3\u4e86\u4f60\u7684\u8fde\u7ebf\u3002\u5982\u8981\u91cd\u8fde\uff0c\u8bf7\u5237\u65b0\u6d4f\u89c8\u5668!!!\n\n"+
NOR),g_gmain.g_delay_connect=1E4):"kickout"==b?(notify_fail("\u4f60\u88ab\u8e22\u51fa\u4e86\u6e38\u620f\u3002\n"),recvNetWork2(HIR+"\n\n!!!\u4f60\u88ab\u8e22\u51fa\u4e86\u6e38\u620f!!!\n\n"+NOR),g_gmain.g_delay_connect=Number.MAX_VALUE):"forbid"==b&&(notify_fail("\u4f60\u88ab\u7981\u6b62\u4e86\u767b\u5f55\u6e38\u620f\u3002\n"),recvNetWork2(HIR+"\n\n!!!\u4f60\u88ab\u7981\u6b62\u4e86\u767b\u5f55\u6e38\u620f!!!\n\n"+NOR),g_gmain.g_delay_connect=Number.MAX_VALUE);else if("prompt"==a)g_obj_map.put("msg_prompt",
c),this.show_prompt();else if("dig"==a)"list"==b&&(g_obj_map.put("msg_digs",c),this.show_digs());else if("exercise_list"==a)"list"==b?(g_obj_map.put("msg_exercise_list",c),gSocketMsg2.show_exercise_list()):"click"==b?"exercise_list"==this._current_page&&(e=g_obj_map.get("msg_exercise_list"),e.put("tl",0),gSocketMsg2.get_exercise_bottom_msg(1E3*parseInt(c.get("tl"))),gSocketMsg2.change_exercise_list()):"click_finish"==b&&"exercise_list"==this._current_page&&gSocketMsg2.change_exercise_list();else if("change_server"==
a)b=c.get("ip"),"old_server"==b?g_world_uid=g_world_port=g_world_ip=0:(g_world_ip=b,g_world_port=parseInt(c.get("port")),g_world_uid=c.get("world_uid")),this._msg="",sock.close(),sock=0,g_gmain.g_delay_connect=0,connectServer();else if("clan"==a)if("list"==b)g_obj_map.put("msg_clan_list",c),gSocketMsg2.show_clan_list();else if("view"==b)g_obj_map.put("msg_clan_view",c),"clan_members"==this._current_page?gSocketMsg2.show_clan_members():"clan_shop"==this._current_page?gSocketMsg2.show_clan_shop():gSocketMsg2.show_clan();
else if("shop"==b){if(d=g_obj_map.get("msg_clan_view"))c.remove("type"),c.remove("subtype"),d.putAll(c);gSocketMsg2.show_clan_shop()}else if("members"==b){if(d=g_obj_map.get("msg_clan_view")){for(b=0;;b++)if(d.get("mm_"+b))d.remove("mm_"+b);else break;c.remove("type");c.remove("subtype");d.putAll(c)}gSocketMsg2.show_clan_members()}else if("reqs"==b){if(d=g_obj_map.get("msg_clan_view")){for(b=0;;b++)if(d.get("rq_"+b))d.remove("rq_"+b);else break;c.remove("type");c.remove("subtype");d.putAll(c)}gSocketMsg2.show_clan_reqs()}else"yb_sort"==
b&&(g_obj_map.put("msg_clan_yb_sort",c),gSocketMsg2.show_clan_yb_sort())};this._input_id=0;this.js_reg=function(c){c.get("type");if("delay_msg"==c.get("subtype")){var a=c.get("p"),b=$("div#out");a?a=parseInt(a):(a=1,b.html(""));var d=c.get("msg"+a);if(d){g_gmain.reg(1);for(var e="<p align='center'>",d=d.split("["),f,h,g=0;g<d.length;g++)if(f=d[g].split("]"),0!=f.length)if(1==f.length)e+=this.http_font_text(f[0],3);else{h=f[0].split("_");if(3<=h.length)if("button"==h[0])e+=this.make_cmd(h[1],h[2],
3);else if("input"==h[0]){this._input_id++;var j="input_"+this._input_id,e=e+("<input id='"+j+"' type='text' value='"+h[1]+"' class='reg_input'><button id='b_"+j+"' class='reg_button'>\u786e\u5b9a</button>"),e=e+"<script>",e=e+("$('button#b_"+j+"').click(function(e) {var cmd = $('input#"+j+"');if(typeof(checkKeywords)!='undefined' && !checkKeywords(cmd.val().trim().replace(/[\\x00-\\x20\\x7F-\\xA0\\u1680\\u180E\\u2000-\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+/g, ''))){g_gmain.notify_fail('\u4f60\u9009\u62e9\u7684\u540d\u5b57\u542b\u6709\u7981\u7528\u8bcd\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01');cmd.focus();return false;} g_gmain.clickButton(cmd.val().trim());});"),
e=e+"<\/script>"}e+=this.http_font_text(f[1],3)}g_gmain.recvNetWork(e+"</p>");b.scrollTop(b.prop("scrollHeight"));c.put("p",a+1);a=(a=c.get("delay_tm"))?parseInt(a):0;(b=g_gmain.getUrlAttr(document.location.href,"arg"))&&0<b.length?setTimeout(function(){gSocketMsg.js_reg(c)},0==a?800:a):setTimeout(function(){gSocketMsg.js_reg(c)},0==a?1E3:a)}}};this.attrsChanged=function(c){var a,b=g_obj_map.get("msg_attrs");g_obj_map.get("msg_score");var d=0,e=0,f=0;if((a=c.get("force"))&&b)b.put("force",a),d++,
e++;if((a=c.get("max_force"))&&b)b.put("max_force",a),d++,e++;if((a=c.get("kee"))&&b)b.put("kee",a),d++,e++;if((a=c.get("max_kee"))&&b)b.put("max_kee",a),d++,e++;if((a=c.get("force_factor"))&&b)b.put("force_factor",a),d++,e++,f++;if((a=c.get("exp"))&&b)b.put("exp",a),d++;if((a=c.get("pon"))&&b)b.put("pon",a),d++;if((a=c.get("money"))&&b)b.put("money",a),d++;if((a=c.get("master_id"))&&b)b.put("master_id",a),e++,d++;if((a=c.get("master_name"))&&b)b.put("master_name",a),e++,d++;if((a=c.get("jh_exercise"))&&
b)b.put("jh_exercise",a),e++;if((a=c.get("practice_value"))&&b)b.put("practice_value",a),d++;if((a=c.get("chuaimo_value"))&&b)b.put("chuaimo_value",a),d++;if((a=c.get("yuanbao"))&&b)b.put("yuanbao",a),d++;if((a=c.get("yuanbao_score"))&&b)b.put("yuanbao_score",a),d++;if((a=c.get("xf_score"))&&b)b.put("xf_score",a),d++;if((a=c.get("lvl"))&&b)b.put("lvl",a),d++;if((a=c.get("auto_fight"))&&b)b.put("auto_fight",a),g_gmain.is_fighting&&(a=parseInt(b.get("auto_fight")),a=this.make_cmd("",0<a?"auto_fight 0":
"auto_fight 1",0<a?"combat_auto_fight":"combat_no_auto_fight",0),a=g_gmain.change_html(a),document.getElementById("combat_auto_fight").innerHTML=a);if((a=c.get("hour_exp"))&&b)b.put("hour_exp",a),d++;0<d&&("home"==this._current_page?this.go_home():"work"==this._current_page?this.show_work():"skills"==this._current_page?this.show_skills(0,this._sub_page):"master_skills"==this._current_page?this.show_master_skills():"skill_info"==this._current_page?this.show_skill_info():"shops"==this._current_page?
this.show_shops():"score_shop"==this._current_page?gSocketMsg2.show_score_shops():"pay_return"==this._current_page?this.show_pay_return():"xf_shop"==this._current_page?gSocketMsg2.show_xf_shops():"buys"==this._current_page?this.show_buys():"shop_info"==this._current_page?this.show_shop_info():"buy_info"==this._current_page?this.show_buy_info():"vip"==this._current_page?this.show_vip():"exercise_list"==this._current_page&&gSocketMsg2.change_exercise_list());0<e&&"score"==this._current_page&&("score_info"!=
this._sub_page&&"items"!=this._sub_page)&&this.show_score();0<f&&"score"==this._current_page&&("score_info"!=this._sub_page&&"items"!=this._sub_page)&&g_gmain.clickButton("score")};this.add_page=function(c,a){!a&&("home"==c||"look_room"==c)&&this.clear_page();var b=g_gmain.gHtop,d=getScreenWidth();getScreenHeight();var e;e=0;"jh_select"==c||"work"==c||"swords"==c||"swords_select_member"==c||"tw_pay"==c||"swords_shop"==c||"rank_select"==c||"skin_select"==c||"swords_vs_list"==c||"digs"==c||"map_info"==
c||"fb_select"==c||"chengzhang"==c||"day_pay"==c||"clan_list"==c||"clan_reqs"==c||"clan_member_info"==c||"clan_role_detail"==c||"clan_yb_sort"==c||"show_html_page"==c?(e=Math.floor(d/5),e=Math.floor(0.446*e)+5,g_gmain.gHtop=e):"score"==c||"skills"==c||"master_skills"==c||"buys"==c||"shops"==c||"score_shop"==c||"xf_shop"==c||"sorts"==c||"enables"==c||"vip"==c||"swords_sort"==c||"wshop"==c||"team"==c||"pay_return"==c||"friend"==c||"cangjianlou"==c||"clan_view"==c||"clan_members"==c||"clan_shop"==c?
(e=Math.floor(d/5),e=Math.floor(0.446*e)+10,g_gmain.gHtop=e,e=Math.floor(d/4-5),e=Math.floor(0.255*e),g_gmain.gHtop+=e+5):"jm"==c?(e=Math.floor(d/5),e=Math.floor(0.446*e)+10,g_gmain.gHtop=e,e=Math.floor(d/4),e=Math.floor(0.255*e),g_gmain.gHtop+=e+5,e=Math.floor(d/4),e=Math.floor(30*e/160),g_gmain.gHtop+=e+20*e/100+8):g_gmain.gHtop=0;g_gmain.gHtop!=b&&g_gmain.adjustLayout();"score"==c&&(this._sub_page=0);for(b=0;b<this._page.length;b++)if(this._page[b]==c){this._page.splice(b,1);break}10<=this._page.length&&
this._page.splice(0,1);this._current_page=this._page[this._page.length]=c};this.remove_page=function(c){for(var a=0;a<this._page.length;a++)if(this._page[a]==c){this._page.splice(a,1);break}};this.refreshPage=function(c){c||(c=this._current_page);"score"==c?"score_info"==this._sub_page?this.show_score_info():"items"==this._sub_page?this.show_items():this.show_score():"home"==c?this.go_home():"look_room"==c?this.show_room():"score_info"==c?this.show_score_info():"npc"==c?this.show_npc():"item"==c?
this.show_item():"user"==c?this.show_user():"jh_list"==c?this.show_jh_list():"cangjianlou"==c?this.show_cangjianlou():"jh_select"==c?this.jh_select():"fb_list"==c?this.show_fb_list():"fb_select"==c?this.fb_select():"rank_select"==c?this.rank_select():"work"==c?this.show_work():"skills"==c?this.show_skills(0,this._sub_page):"master_skills"==c?this.show_master_skills():"skill_info"==c?this.show_skill_info():"items"==c?this.show_items():"item_info"==c?this.show_item_info():"combat_result_info"==c?this.finish_combat():
"shops"==c?this.show_shops():"score_shop"==c?gSocketMsg2.show_score_shops():"xf_shop"==c?gSocketMsg2.show_xf_shops():"pay_return"==c?this.show_pay_return():"buys"==c?this.show_buys():"shop_info"==c?this.show_shop_info():"swords_shop_info"==c?this.show_swords_shop_info():"sorts"==c?this.show_sorts():"vip"==c?this.show_vip():"swords"==c?this.show_swords():"swords_select_member"==c?this.show_swords_select_member():"swords_shop"==c?this.show_swords_shops():"swords_sort"==c?this.show_swords_sorts():"swords_vs_list"==
c?this.show_swords_vs_list():"sort_info"==c?this.show_sort_info():"enables"==c?this.show_enables():"enable_info"==c?this.show_enable_info():"chat"==c?this.show_channel(this._sub_page):"finish_quest_info"==c?this.show_finish_quest():"family_info"==c?this.show_family_info(0):"family_info_2"==c?this.show_family_info(this._sub_page):"map_info"==c?this.show_map():"prompt"==c?this.show_prompt():"html_page"==c?this.show_html_page():"tw_pay"==c?show_tw_pay():"skin_select"==c?this.skin_select():"digs"==c?
this.show_digs():"wshop"==c?gSocketMsg2.show_wshop():"team"==c?gSocketMsg2.show_team():"friend"==c?gSocketMsg2.show_friend():"exercise_list"==c?gSocketMsg2.show_exercise_list():"chengzhang"==c?this.show_chengzhang():"day_pay"==c?this.show_day_pay():"show_html_page"==c?this.show_html_page():"jm"==c?gSocketMsg2.show_jm():"clan_list"==c?gSocketMsg2.show_clan_list():"clan_view"==c?gSocketMsg2.show_clan():"clan_members"==c?gSocketMsg2.show_clan_members():"clan_reqs"==c?gSocketMsg2.show_clan_reqs():"clan_shop"==
c?gSocketMsg2.show_clan_shop():"clan_member_info"==c?gSocketMsg2.show_clan_member_info():"clan_yb_sort"==c&&gSocketMsg2.show_clan_yb_sort()};this.showPrev=function(){if(2>this._page.length)return this.clear_page(),this.go_home(),0;var c=this._page[this._page.length-2];this._page.splice(this._page.length-1,1);this.refreshPage(c);this._current_page=c};this.clear_page=function(){this._page=[];this._sub_page=0};this.do_channel=function(c){if(g_gmain.is_exercising)return 0;500<chatMsg.length&&chatMsg.splice(0,
1);var a=c.get("msg");if(a&&"undefined"!=typeof filterKeywords)try{var b,d=a.indexOf("\u3011");-1!=d&&(b=a.substring(0,d+1),a=a.substring(d+1));a=filterKeywords(a,"*");b&&(a=b+a);c.put("msg",a)}catch(e){}chatMsg[chatMsg.length]=c;g_gmain.is_chatting?this.show_channel(this._sub_page,c):this.get_have_chat_msg_cmd();g_save_chat_cache=1};this.change_skill=function(c,a,b,d){var e=g_obj_map.get("msg_skills");if(!e)return 0;for(var f,h=1;f=e.get("skill"+h);h++)if(f=g_simul_efun.isArray(f)?f:f.split(","),
!(6>f.length)&&f[0]==c)return a&&(f[2]=a),b&&(f[3]=b),d&&(f[5]=0>d?0:1),e.put("skill"+h,f),1;return 0};this.change_item=function(c,a,b,d){var e=g_obj_map.get("msg_items");if(!e)return 0;for(var f,h=1;f=e.get("items"+h);h++)if(f=g_simul_efun.isArray(f)?f:f.split(","),!(5>f.length)&&f[0]==c){d&&d.get("amount")?c=parseInt(d.get("amount")):(c=parseInt(f[2]),c+=a);if(0>=c)break;f[2]=c;-1<b&&(f[3]=b);e.put("items"+h,f);return 1}return 0};this.change_store=function(c,a){var b=g_obj_map.get("msg_items");
if(!b)return 0;for(var d,e=1;d=b.get("stores"+e);e++)if(d=g_simul_efun.isArray(d)?d:d.split(","),!(4>d.length)&&d[0]==c){var f=parseInt(d[2]),f=f+a;if(0>=f)break;d[2]=f;b.put("stores"+e,d);return 1}return 0};this.make_cmd=function(c,a,b,d){a||(a="0");d||(d=0);return CHANGE_CMD+b+";"+d+";"+a+CHANGE_CMD+c+CHANGE_CMD+"0"+CHANGE_CMD};this.http_center_text=function(c){return"<p align='center'>"+c+"</p>"};this.http_left_text=function(c){return"<p align='left'>"+c+"</p>"};this.http_right_text=function(c){return"<p align='right'>"+
c+"</p>"};this.http_hr_text=function(){return'<hr style="height:1px;border:none;border-top:1px solid '+g_hr_color+';margin-top:1px;"/>'};this.http_br_text=function(){return"<br/>"};this.http_font_text=function(c,a){return"<span class='out"+a+"'>"+c+"</span>"};this.removeSaveData=function(){g_obj_map.remove("combat_text_msgs");clear_notify_fail()};this.jh_go=function(c){c=parseInt(c);0>=c&&(c=0);var a=g_obj_map.get("msg_jh_list");if(!a)return 0;a.put("sel",c);this.show_jh_list()};this.fb_go=function(c){c=
parseInt(c);0>=c&&(c=0);var a=g_obj_map.get("msg_fb_list");if(!a)return 0;a.put("sel",c);this.show_fb_list()};this.query_work=function(c){var a=g_obj_map.get("msg_work");if(a)for(var b,d=1;b=a.get("work"+d);d++)if(b=g_simul_efun.isArray(b)?b:b.split(","),!(10>b.length)&&b[0]==c)return b};this.show_swords_vs_list=function(){var c=g_obj_map.get("msg_swords_vs_list"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;gSocketMsg.add_page("swords_vs_list");var b,a="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>",
a=a+("<td style='width:34%' align='center'>"+gSocketMsg.http_font_text("\u89c2\u770b\u8bba\u5251","title")+"</td>"),a=a+("<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>"),a=a+"</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(a);var a="<p align='center'>\u4ee5\u4e0b\u662f\u76ee\u524d\u6b63\u5728\u8fdb\u884c\u7684\u8bba\u5251\u573a\u6b21</p>",d,a=a+"<table align = 'center' style='width:100%;border-style:solid;border-width:0px;'>";
for(b=1;d=c.get("item"+b);b++)if(d=g_simul_efun.isArray(d)?d:d.split(","),!(4>d.length))var e=HIG+"\u89c2\u6218"+NOR,a=a+("<tr bgColor="+g_table_color+" onclick=\"clickButton('watch_vs "+d[0]+"');\">"),a=a+("<td style='width:33%' align='center'>"+YEL+"\u7b2c"+g_simul_efun.chinese_number(b)+"\u573a\u8bba\u5251"+NOR+"</td>"),a=a+("<td style='width:34%' align='center'>"+gSocketMsg.http_font_text(d[1],2)+" VS "+gSocketMsg.http_font_text(d[3],2)+"</td>"),a=a+("<td style='width:33%' align='center'>"+e+
"</td>"),a=a+"</tr>",a=a+"<tr><td> </td></tr>";a+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(a);c.scrollTop(0);return 1};this.show_swords_sorts=function(){var c=g_obj_map.get("msg_swords_sort"),a=g_obj_map.get("msg_attrs");if(!c)return g_gmain.clickButton("swords"),0;if(!a)return 0;this.add_page("swords_sort");var b;b="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";b+="<td style='width:34%' align='center'>"+this.http_font_text(WHT+"\u4e0a\u5c4a\u8bba\u5251\u6392\u884c"+
NOR,"title")+"</td>";b+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";b+="</tr></table>";b+="<table align = 'center' bgColor="+g_table_color+" border=0 cellpadding=0 cellspacing=0 style='width:100%'><tr>";b+="<td align = 'center' style='width:25%'>"+this.make_cmd("\u8bba\u5251\u540d\u6b21","","i")+"</td>";b+="<td align = 'center' style='width:25%'></td>";b+="<td align = 'center' style='width:25%'></td>";b+=
"<td align = 'center' style='width:25%'></td>";b+="</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(b);b="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";for(var d=0,e,f=a.get("id"),a=1;e=c.get("info"+a);a++)e=g_simul_efun.isArray(e)?e:e.split(","),5>e.length||(d++,b+="<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",b+="<td style='width:25%;WORD-WRAP:break-word' align='left'>"+this.http_font_text((1==d?HIR:2==d?HIM:3==
d?HIY:CYN)+"\u7b2c"+d+"\u540d"+NOR,3)+"</td>",b+="<td style='width:25%;WORD-WRAP:break-word' align='left'>"+this.http_font_text(HIR+(e[0]==f?"[\u6211]":"")+NOR+YEL+e[1]+NOR,2)+"</td>",b+="<td style='width:25%;WORD-WRAP:break-word' align='left'>"+this.http_font_text(e[2]+"\u7ea7",2)+"</td>",b+="<td style='width:25%;WORD-WRAP:break-word' align='left'>"+this.http_font_text(e[3],2)+"</td>",b+="</tr>",b+="<tr><td> </td></tr>");for(;4>d;d++)b+="<tr bgColor="+g_table_color+">",b+="<td style='width:25%' align='left'> </td>",
b+="<td style='width:25%' align='center'> </td>",b+="<td style='width:25%' align='left'> </td>",b+="<td style='width:25%' align='left'> </td>",b+="</tr>",b+="<tr><td> </td></tr>";b+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(b);0<this._page_scrollTop&&c.scrollTop(this._page_scrollTop);this._page_scrollTop=0;return 1};this.show_swords_shop_info=function(){var c=g_obj_map.get("msg_swords_shop"),a=g_obj_map.get("msg_swords");if(!c)return g_gmain.clickButton("swords"),0;if(!a)return 0;var b=
c.get("selected");b||(b="1");c=c.get("item"+b);if(!c)return 0;list=c.split(",");if(3>list.length)return 0;c=$("div#out");0>=this._page_scrollTop&&(this._page_scrollTop=c.scrollTop());this.add_page("swords_shop_info");var d;d="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";d+="<td style='width:34%' align='center'>"+this.http_font_text(HIC+list[0]+NOR,"title")+"</td>";d+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+
g_img_host+"back.png' class='prev'/></a></td>";d+="</tr></table>";d+=this.http_hr_text();d+="<table align='center' style='width:100%;TABLE-LAYOUT:fixed;'>";d+="<tr>";d+="<td style='width:5%;WORD-WRAP:break-word'></td>";d+="<td style='width:90%;WORD-WRAP:break-word' align='center'>"+list[1]+"</td>";d+="<td style='width:5%;WORD-WRAP:break-word'></td>";d+="</tr></table>";d+="\n";d+="<table align = 'center' style='width:100%'>";d+="<tr>";d+="<td style='width:5%'></td>";d+="<td style='width:90%' align='right'><b>"+
this.http_font_text(HIM+"\u8bba\u5251\u79ef\u5206 "+NOR+""+a.get("swords_score")+""+CYN+""+NOR,2)+"</b></i></td>";d+="<td style='width:5%'></td>";d+="</tr>";d+="</table>";d+="<img src='"+g_img_host+"line.png' class='all_line'/><br/>";d+="<p align='center'>"+this.http_font_text(YEL+"\u4ef7\u683c "+NOR+CYN+"<i><b>"+list[2]+"</i></b>"+NOR+YEL+" \u8bba\u5251\u79ef\u5206"+NOR,4)+"</p>";d+="<table align = 'center' style='width:100%'>";d+="<tr>";d+="<td style='width:5%'></td>";d+="<td style='width:90%' align='center'>"+
this.make_cmd("\u8d2d\u4e70","swords shop_buy "+b,2,0)+"</td>";d+="<td style='width:5%'></td>";d+="</tr>";d+="</table>";c.html("");g_gmain.recvNetWork(d);return 1};this.show_swords_shops=function(){var c=g_obj_map.get("msg_swords_shop"),a=g_obj_map.get("msg_swords");if(!c||!a)return 0;this.add_page("swords_shop");var b=parseInt(a.get("swords_score")),a="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>",a=a+("<td style='width:34%' align='center'>"+this.http_font_text("\u8bba\u5251\u79ef\u5206\u5546\u57ce",
"title")+"</td>"),a=a+("<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>"),a=a+"</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(a);var d=1,e="+\u5fae\u4fe1\u5206\u4eab(\u83b7\u514d\u8d39\u5143\u5b9d) ";"undefined"!=typeof g_use_facebook&&g_use_facebook&&(d=2,e="+Facebook\u5206\u4eab(\u83b7\u514d\u8d39\u5143\u5b9d) ");a="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";
a+="<td style='width:45%' align='left'><a href=\"javascript:g_gmain.share_game("+d+")\" style='text-decoration:none'><b>"+this.http_font_text(HIM+e+NOR,2)+"</b></i></a></td>";a+="<td style='width:45%' align='right'><b>"+this.http_font_text(HIM+"\u8bba\u5251\u79ef\u5206 "+NOR+""+b+""+CYN+" "+NOR,2)+"</b></i></td>";a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";d=0;for(b=1;e=c.get("item"+
b);b++)e=g_simul_efun.isArray(e)?e:e.split(","),3>e.length||(d++,a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('swords_shopinfo "+b+"');\">",a+="<td style='width:20%;WORD-WRAP:break-word' align='left'>"+this.http_font_text(YEL+e[0]+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='left'>"+this.http_font_text(e[1],2)+"</td>",a+="<td style='width:20%;WORD-WRAP:break-word' align='right'>"+this.http_font_text(CYN+"<b>"+e[2]+"\u79ef\u5206</b>"+NOR,2)+"</td>",a+="</tr>",a+=
"<tr><td> </td></tr>");for(;4>d;d++)a+="<tr bgColor="+g_table_color+">",a+="<td style='width:33%' align='left'> </td>",a+="<td style='width:34%' align='center'> </td>",a+="<td style='width:33%' align='left'> </td>",a+="</tr>",a+="<tr><td> </td></tr>";a+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(a);0<this._page_scrollTop&&c.scrollTop(this._page_scrollTop);this._page_scrollTop=0;return 1};this.show_swords_select_member=function(){var c=g_obj_map.get("msg_swords_select_member");if(!c)return 0;
this.add_page("swords_select_member");var a;a="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";a+="<td style='width:34%' align='center'>"+this.http_font_text("\u9009\u62e9\u961f\u53cb","title")+"</td>";a+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";a+="</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(a);a="<p align='center'>\u8bf7\u9009\u62e9\u6216\u8005\u53d6\u6d88\u961f\u53cb</p>";
var b=c.get("select_member"),d=[];b&&(d=b.split(","),c.get("select_member_name").split(","));b=c.get("npc_list").split(",");c=c.get("npc_list_name").split(",");a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;'>";for(var e=0;e<b.length;e++){seled=$.inArray(b[e],d);var f=-1==seled?HIG+"\u9009\u62e9"+NOR:HIY+"\u53d6\u6d88"+NOR;a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('"+(-1==seled?"swords select_member "+b[e]:"swords remove_member "+b[e])+"');\">";a+=
"<td style='width:70%' align='center'>"+this.http_font_text(c[e],4)+"</td>";a+="<td style='width:30%' align='center'>"+this.http_font_text(f,3)+"</td>";a+="</tr>";a+="<tr><td> </td></tr>"}a+="</table>";d=$("div#out");d.html("");g_gmain.recvNetWork(a);d.scrollTop(0);return 1};this.show_swords_try=function(){var c=g_obj_map.get("msg_swords"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;this.add_page("swords");var b=parseInt(c.get("swords_score")),d,e,b="<table align = 'center' border=0 style='width:100%'><tr>"+
("<td style='width:33%' align='left'><a href=\"javascript:clickButton('swords shop go')\" style='text-decoration:none'><b>"+this.http_font_text(MAG+"\u8bba\u5251\u79ef\u5206"+b+"[\u5151\u5956]"+NOR,2)+"</b></a></td>"),b=b+("<td style='width:34%' align='center'>"+this.http_font_text("\u8bba \u5251","title")+"</td>"),b=b+("<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>"),b=b+"</tr></table>";$("div#out_top").html("");
g_gmain.recvNetWorkTop(b);b="";e=c.get("swords_wk").split(",");var f=parseInt(e[0]);e=2<=e.length?parseInt(e[1]):0;parseInt(c.get("wk"));b+="<table align='center' style='width:100%'>";b+="<tr>";b+="<td style='width:8%'></td>";b+="<td style='width:42%' align='left'>"+this.http_font_text(HIC+"\u8bba\u5251\u7684\u65e5\u5b50"+NOR,3)+"</td>";b+="<td style='width:42%' align='right'>"+this.http_font_text(HIC+"\u6bcf\u4e2a\u661f\u671f"+g_simul_efun.chinese_number(f)+(e?"\u3001\u661f\u671f"+g_simul_efun.chinese_number(f):
"")+NOR,3)+"</td>";b+="<td style='width:8%'></td>";b+="</tr>";b+="</table>";b+=this.http_hr_text();b+="<table align='center' style='width:100%'>";b+="<tr>";b+="<td style='width:100%' align='center'>"+this.http_font_text(HIM+"\u5728\u4e0d\u4e3e\u884c\u6b63\u5f0f\u8bba\u5251\u7684\u65e5\u5b50\u91cc\uff0c\u53ef\u4ee5\u8bd5\u5251\uff01"+NOR,2)+"</td>";b+="</tr><tr>";b+="<td style='width:100%' align='center'>"+this.http_font_text(HIW+"(\u8bd5\u5251\u7684NPC\u53ea\u662f\u76f8\u5f53\u4e8e\u4f60\u7684\u62f7\u8d1d\u5b9e\u529b\uff0c\u4e0d\u4ee3\u8868NPC\u7684\u771f\u6b63\u5b9e\u529b\uff01)"+
NOR,2)+"</td>";b+="</tr>";b+="</table>";f="";d=c.get("select_member");e=[];if(d){d.split(",");e=c.get("select_member_name").split(",");for(d=0;d<e.length;d++)f+=e[d]+" "}f=0==f.length?"\u65e0":a.get("name")+" "+f;b+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";b+="<tr bgColor="+g_table_color+" onclick=\"clickButton('swords select_member list');\">";b+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u6211\u7684\u961f\u53cb"+
NOR,2)+"</td>";b+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(f,2)+"</td>";b+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u66f4\u6362"+NOR,2)+"</td>";b+="</tr>";b+="<tr><td> </td></tr>";b+="</table>";b+="<table align='center' style='width:100%'>";b+="<tr>";b+="<td style='width:5%'></td>";b+="<td style='width:90%' align='center'>"+this.http_font_text(HIR+"<b><i>V S</i></b>"+NOR,"big_text")+"</td>";b+="<td style='width:5%'></td>";
b+="</tr>";b+="<tr><td> </td></tr>";b+="</table>";if(a=c.get("next_swords_try"))a=a.replace(/,/g," "),b+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",b+="<tr bgColor="+g_table_color+" onclick=\"clickButton('swords next_swords_try change');\">",b+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u672c\u6b21\u5c06\u6311\u6218"+NOR,2)+"</td>",b+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+
this.http_font_text(a,2)+"</td>",b+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u66f4\u6362"+NOR,2)+"</td>",b+="</tr>",b+="<tr onclick=\"clickButton('swords sorts go');\">",b+="<td style='width:20%;WORD-WRAP:break-word' align='center'></td>",b+="<td style='width:60%;WORD-WRAP:break-word' align='center'></td>",b+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIG+"\u67e5\u770b\u8bba\u5251\u6392\u884c"+NOR,2)+"</td>";b+="<table align='center' style='width:100%'>";
b+="<tr>";b+="<td style='width:5%'></td>";b+="<td style='width:90%' align='center'>"+this.http_font_text("\u4eca\u65e5\u5df2\u5b8c\u6210"+c.get("swords_try")+"/"+c.get("max_swords_try"),2)+"</td>";b+="<td style='width:5%'></td>";b+="</tr>";b+="</table>";b+="<table align='center' style='width:100%'>";b+="<tr>";b+="<td style='width:5%'></td>";b+="<td style='width:90%' align='center'>"+this.make_cmd(HIG+"\u8bd5\u5251"+NOR,"swords fight_test go","2")+"</td>";b+="<td style='width:5%'></td>";b+="</tr>";
b+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(b);0<this._page_scrollTop&&c.scrollTop(this._page_scrollTop);this._page_scrollTop=0;return 1};this.show_swords_vs=function(){var c=g_obj_map.get("msg_swords"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;this.add_page("swords");var b,d,a="",e=parseInt(c.get("swords_score"));d=c.get("swords_wk").split(",");parseInt(d[0]);2<=d.length&&parseInt(d[1]);parseInt(c.get("wk"));var f=parseInt(c.get("hour"));d=parseInt(c.get("can_report"));var h=
parseInt(c.get("can_get_drop")),g=parseInt(c.get("swordsing")),j=parseInt(c.get("reported"));b=parseInt(c.get("swords_num"));var k=parseInt(c.get("swords_number")),l=parseInt(c.get("in_swords")),q=parseInt(c.get("swords_lose")),a=a+"<table align = 'center' border=0 style='width:100%'><tr>"+("<td style='width:33%' align='left'><a href=\"javascript:clickButton('swords shop go')\" style='text-decoration:none'><b>"+this.http_font_text(MAG+"\u8bba\u5251\u79ef\u5206"+e+"[\u5151\u5956]"+NOR,2)+"</b></a></td>"),
a=1!=g?a+("<td style='width:34%' align='center'>"+this.http_font_text("\u8bba \u5251","title")+"</td>"):a+("<td style='width:34%' align='center'>"+this.http_font_text("\u8bba\u5251[\u5269\u4f59"+b+"\u4eba]","title")+"</td>"),a=a+("<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>"),a=a+"</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(a);a="<table align='center' style='width:100%'>";a+="<tr>";a+=
"<td style='width:8%'></td>";a+="<td style='width:42%' align='left'>"+this.http_font_text(HIC+"\u4eca\u65e5\u8bba\u5251"+NOR,3)+"</td>";a+="<td style='width:42%' align='right'>"+this.http_font_text(HIC+"\u665a\u4e0a"+f+"\u70b9\u5f00\u6218\uff01"+NOR,3)+"</td>";a+="<td style='width:8%'></td>";a+="</tr>";a+="</table>";a+=this.http_hr_text();a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:100%' align='center'>"+this.http_font_text(HIR+"\u8bf7\u62a5\u540d\u540e\u8bb0\u5f97\u51c6\u65f6\u53c2\u4e0e\uff0c\u5426\u5219\u81ea\u52a8\u5224\u8d1f"+
NOR,2)+"</td>";a+="</tr><tr>";a+="<td style='width:100%' align='center'>"+this.http_font_text(HIR+"(\u8bba\u5251\u671f\u95f4\u4e0d\u8981\u53c2\u4e0e\u4efb\u4f55\u5176\u4ed6\u6218\u6597\uff0c\u5426\u5219\u81ea\u52a8\u5224\u8d1f)"+NOR,2)+"</td>";a+="</tr>";a+="</table>";e="";b=c.get("select_member");f=[];if(b){b.split(",");f=c.get("select_member_name").split(",");for(b=0;b<f.length;b++)e+=f[b]+" "}0==e.length&&(e="\u65e0");a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";
a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('swords select_member list');\">";a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u6211\u65b9"+NOR,2)+"</td>";a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(e,2)+"</td>";a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u66f4\u6362"+NOR,2)+"</td>";a+="</tr>";a+="<tr><td> </td></tr>";a+="</table>";a+="<table align='center' style='width:100%'>";
a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:90%' align='center'>"+this.http_font_text(HIR+"<b><i>V S</i></b>"+NOR,"big_text")+"</td>";a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr><td> </td></tr>";a+="</table>";if((f=c.get("next_swords_try"))&&0<f.length)f=f.replace(/,/g," "),a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('swords next_swords_try info');\">",a+=
"<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u4e0b\u8f6e\u5c06\u6311\u6218"+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(f,2)+"</td>",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u67e5\u770b"+NOR,2)+"</td>",a+="</tr>",a+="<tr><td> </td></tr>";else if(h)a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",a+=
"<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u8bba\u5251\u5b8c\u6210"+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text("\u672c\u6b21\u8bba\u5251\u5df2\u7ecf\u5b8c\u6210\uff0c\u53ef\u9886\u53d6\u5956\u52b1",2)+"</td>",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u9886\u5956"+NOR,2)+"</td>",a+="</tr>",
a+="<tr onclick=\"clickButton('swords sorts go');\">",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'></td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'></td>",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIG+"\u67e5\u770b\u8bba\u5251\u6392\u884c"+NOR,2)+"</td>",a+="</tr>";else if(1==g){var n=parseInt(c.get("next_swords_time"));j&&0<n?(a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",
a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u7b49\u5f85\u4e0b\u4e00\u8f6e"+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(""+g_simul_efun.getStringTm(n,2)+"\u540e\u5f00\u59cb...",2)+"</td>"):l?(a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",
a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u8bba\u5251\u8fdb\u884c\u4e2d"+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text("\u5e78\u8fd0\uff01\u672c\u8f6e\u8f6e\u7a7a...",2)+"</td>"):q?(a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+
this.http_font_text(YEL+"\u8bba\u5251\u8fdb\u884c\u4e2d"+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIR+"\u5df2\u88ab\u6dd8\u6c70..."+NOR,2)+"</td>"):(a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u8bba\u5251\u8fdb\u884c\u4e2d"+NOR,
2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text("\u672c\u6b21\u8bba\u5251\u6b63\u5728\u8fdb\u884c\u4e2d...",2)+"</td>");a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u8bba\u5251\u8fdb\u884c\u4e2d..."+NOR,2)+"</td>";a+="</tr>";a+="<tr><td> </td></tr>"}else 2==g?(a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",
a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u672c\u8f6e\u8bba\u5251\u7ed3\u675f"+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text("\u672c\u6b21\u8bba\u5251\u5df2\u7ecf\u7ed3\u675f...",2)+"</td>",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u8bba\u5251\u7ed3\u675f"+NOR,2)+"</td>"):(a+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",
a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('');\">",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(YEL+"\u4e0b\u8f6e\u5c06\u6311\u6218"+NOR,2)+"</td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+this.http_font_text("\u8bba\u5251\u8fd8\u672a\u6b63\u5f0f\u5f00\u59cb",2)+"</td>",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIW+"\u8bf7\u7b49\u5f85"+NOR,2)+"</td>"),a+="</tr>",a+="<tr onclick=\"clickButton('swords sorts go');\">",
a+="<td style='width:20%;WORD-WRAP:break-word' align='center'></td>",a+="<td style='width:60%;WORD-WRAP:break-word' align='center'></td>",a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+this.http_font_text(HIG+"\u67e5\u770b\u8bba\u5251\u6392\u884c"+NOR,2)+"</td>",a+="</tr>";a+="</table>";a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a=1==g?a+("<td style='width:90%' align='center'>"+this.http_font_text("\u4eca\u65e5\u7d2f\u79ef\u53ef\u5956\u52b1"+
parseInt(c.get("drop_score"))+"\u8bba\u5251\u79ef\u5206\n(\u5f53\u524d\u7b2c"+k+"\u8f6e)",2)+"</td>"):a+("<td style='width:90%' align='center'>"+this.http_font_text("\u4eca\u65e5\u7d2f\u79ef\u53ef\u5956\u52b1"+parseInt(c.get("drop_score"))+"\u8bba\u5251\u79ef\u5206",2)+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";0==e.length?(a+="<table align='center' style='width:100%'>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:90%' align='center'>"+this.make_cmd(HIG+"\u8bd5\u5251"+
NOR,"swords fight_test go","2")+"</td>"):d?(a+="<table align='center' style='width:100%'>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:90%' align='center'>"+this.make_cmd(HIG+"\u62a5\u540d"+NOR,"swords report go","2")+"</td>"):h?(a+="<table align='center' style='width:100%'>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:90%' align='center'>"+this.make_cmd(HIG+"\u9886\u5956"+NOR,"swords get_drop go","2")+"</td>"):1==g?(a+="<table align='center' style='width:100%'>",
a+="<tr>",a+="<td style='width:5%'></td>",a=0<n?a+("<td style='width:90%' align='center'>"+this.make_cmd(HIG+""+g_simul_efun.getStringTm(n,2)+"\u540e\u5f00\u59cb..."+NOR,"","2")+"</td>"):0<l?a+("<td style='width:90%' align='center'>"+this.make_cmd(HIG+"\u6218\u524d\u51c6\u5907..."+NOR,"","2")+"</td>"):a+("<td style='width:90%' align='center'>"+this.make_cmd(HIG+"\u8fdb\u5165\u89c2\u6218"+NOR,"swords vs_list go","2")+"</td>")):2==g?(a+="<table align='center' style='width:100%'>",a+="<tr>",a+="<td style='width:5%'></td>",
a+="<td style='width:90%' align='center'>"+this.make_cmd(HIG+"\u8bba\u5251\u5df2\u7ed3\u675f"+NOR,"","2")+"</td>"):(j?(a+="<table align='center' style='width:100%'>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5df2\u62a5\u540d\uff0c\u8bf7\u7b49\u5f85..."+NOR,"","2")+"</td>"):(a+="<table align='center' style='width:100%'>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u672a\u62a5\u540d"+
NOR,"","2")+"</td>"),a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8bd5\u5251"+NOR,"swords fight_test go","2")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(a);0<this._page_scrollTop&&c.scrollTop(this._page_scrollTop);this._page_scrollTop=0;return 1};this.show_swords=function(){var c=g_obj_map.get("msg_swords");if(!c)return g_gmain.clickButton("swords"),0;this.remove_page("swords_select_member");return-1==c.get("swords_wk").indexOf(c.get("wk"))&&
"1"!=c.get("is_swords")?this.show_swords_try():this.show_swords_vs()};this.show_vip=function(){var c=g_obj_map.get("msg_vip"),a=g_obj_map.get("msg_attrs");if(!c)return g_gmain.clickButton("vip"),0;if(!a)return 0;this.add_page("vip");var b=parseInt(a.get("yuanbao")),d=parseInt(c.get("vip_tm")),e=parseInt(c.get("get_vip_drops")),f=parseInt(c.get("family_quest_count")),h=parseInt(c.get("clan_quest_count")),g=parseInt(c.get("do_task_num")),j=parseInt(c.get("badd_task")),k=parseInt(c.get("taofan_task")),
l=parseInt(c.get("finish_sort")),q=parseInt(c.get("finish_dig")),n=parseInt(c.get("finish_diaoyu")),u=Math.floor(f/1E3),v=Math.floor(h/1E3),w=Math.floor(g/1E3),x=Math.floor(j/1E3),B=Math.floor(k/1E3),z=Math.floor(l/1E3),A=Math.floor(q/1E3),C=Math.floor(n/1E3),D=parseInt(c.get("family_quest_yuanbao")),E=parseInt(c.get("clan_quest_yuanbao")),F=parseInt(c.get("task_quest_yuanbao")),G=parseInt(c.get("badd_quest_yuanbao")),J=parseInt(c.get("taofan_quest_yuanbao")),H=parseInt(c.get("sort_quest_yuanbao")),
t=parseInt(c.get("dig_quest_yuanbao")),K=parseInt(c.get("diaoyu_quest_money")),L=parseInt(c.get("need_yuanbao")),y=parseInt(c.get("buy_quest_ratio")),m=parseInt(c.get("can_buy_times")),m=m?parseInt(m):0,r=c.get("can_buy_task_times"),r=r?parseInt(r):0,s=Math.floor(r/1E3),r=r-s,M=5+s,p=c.get("buy_task_times"),p=p?parseInt(p):0,s=s-p;0>s&&(s=0);f-=1E3*u;h-=1E3*v;g-=1E3*w;j-=1E3*x;k-=1E3*B;l-=1E3*z;q-=1E3*A;n-=1E3*C;a.get("id").substring(1);encodeURIComponent(g_simul_efun.replace_special_msg4(c.get("returnUri")));
g_simul_efun.replace_special_msg4(c.get("md5_str"));c.get("areaId");pay_url="javascript:gSocketMsg.go_pay()";p="vip fanli_list";"undefined"!=typeof g_version_tw&&g_version_tw&&(p="shop score_shop");a="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";a+="<td style='width:34%' align='center'>"+this.http_font_text(WHT+"VIP\u6708\u5361"+NOR,"title")+"</td>";a+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";
a+="</tr></table>";a+="<table align = 'center' bgColor="+g_s_table_color+" border=0 cellpadding=0 cellspacing=0 style='width:100%' ><tr>";a+="<td align = 'center' style='width:25%'>"+this.make_cmd("VIP\u6708\u5361","","i")+"</td>";a+="<td align = 'center' style='width:25%'> </td>";a+="<td align = 'center' style='width:25%'> </td>";a+="<td align = 'center' style='width:25%'>"+gSocketMsg.make_cmd(CYN+"<strong>\u5145\u503c\u4f18\u60e0</strong>"+NOR,p,"j")+"</td>";a+="</tr></table>";$("div#out_top").html("");
g_gmain.recvNetWorkTop(a);var p=1,I="+\u5fae\u4fe1\u5206\u4eab(\u83b7\u514d\u8d39\u5143\u5b9d) ";"undefined"!=typeof g_use_facebook&&g_use_facebook&&(p=2,I="+Facebook\u5206\u4eab(\u83b7\u514d\u8d39\u5143\u5b9d) ");a="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='left'><a href=\"javascript:g_gmain.share_game("+p+")\" style='text-decoration:none'><b>"+this.http_font_text(HIM+I+NOR,2)+"</b></i></a></td>";a+="<td style='width:45%' align='right'><a href=\""+
pay_url+"\" style='text-decoration:none' style='text-decoration:none'><b>"+this.http_font_text(HIM+"+\u6211\u7684\u5143\u5b9d "+NOR+""+b+""+CYN+" "+NOR,2)+"</b></i></a></td>";a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+=this.http_hr_text();a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text(CYN+"VIP\u6708\u5361"+NOR,"title")+"</td>";a+="<td style='width:45%' align='center'>"+this.http_font_text(HIC+
"\u9700\u8981 "+NOR+"<i><b>"+HIG+L+NOR+" </b></i>"+HIC+"\u5143\u5b9d"+NOR,2)+"</td>";a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";0>=d?(a+="<td style='width:45%' align='center'>"+this.http_font_text(RED+"\u5c1a\u672a\u5f00\u901a"+NOR,4)+"</td>",a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7acb\u5373\u5f00\u901a"+NOR,"vip buy","3")+"</td>"):(a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5269\u4f59<i><b> "+HIW+(Math.floor(d/
3600/24)+1)+NOR+" </b></i>\u5929",3)+"</td>",a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7eed\u8d39(\u4f18\u60e0)"+NOR,"vip buy","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+=this.http_hr_text();a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:90%' align='center'><i><b>"+this.http_font_text("===\u4ee5\u4e0b\u4e3aVIP\u798f\u5229===",2)+"</b></i></td>";a+="<td style='width:5%'></td>";a+="</tr>";
a+="</table>";a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>\u6bcf\u65e5\u9886\u53d6\uff1a\n24\u5c0f\u65f6\u901a\u52e4\u65f6\u95f4\n\u5f15\u8def\u8702x15\n\u94f6\u4e24x20\u4e07</td>";a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):e?a+("<td style='width:45%' align='center'>"+this.make_cmd("\u5df2\u9886\u53d6","","3")+"</td>"):a+("<td style='width:45%' align='center'>"+
this.make_cmd(HIG+"\u7acb\u5373\u9886\u53d6"+NOR,"vip drops","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5e08\u95e8\u4efb\u52a1",3)+"</td>";a=0==m||f<u?a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+D+
NOR+" </b></i>\u5143\u5b9d",2)+"</td>"):a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+5*D*y+NOR+" </b></i>\u5143\u5b9d",2)+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(f+"/"+u)+NOR+" </b></i>\u6b21",3)+(0==m?"":this.http_font_text("\n<i><b>(\u5b8c\u6210\u540e\u53ef\u989d\u5916\u8d2d\u4e705\u6b21)</b></i>",2))+"</td>";
a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):0==m||f<u?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7acb\u5373\u5b8c\u6210"+NOR,"vip finish_family","3")+"</td>"):a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d2d\u4e705\u6b21"+NOR,"vip buy_family","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";
a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5e2e\u6d3e\u4efb\u52a1",3)+"</td>";a=0==m||h<v?a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+E+NOR+" </b></i>\u5143\u5b9d",2)+"</td>"):a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+5*E*y+NOR+" </b></i>\u5143\u5b9d",2)+"</td>");a+="<td style='width:5%'></td>";a+=
"</tr>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(h+"/"+v)+NOR+" </b></i>\u6b21",3)+(0==m?"":this.http_font_text("\n<i><b>(\u5b8c\u6210\u540e\u53ef\u989d\u5916\u8d2d\u4e705\u6b21)</b></i>",2))+"</td>";a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):0==m||h<v?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7acb\u5373\u5b8c\u6210"+
NOR,"vip finish_clan","3")+"</td>"):a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d2d\u4e705\u6b21"+NOR,"vip buy_clan","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u8c1c\u9898\u4efb\u52a1",3)+"</td>";a=0==r||g<w?a+("<td style='width:45%' align='center'>"+
this.http_font_text("\u9700\u8981<i><b> "+HIG+F+NOR+" </b></i>\u5143\u5b9d",2)+"</td>"):a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+"\u8c1c\u9898\u5361"+NOR+" </b></i>x1 \u5269\u4f59<i> "+HIG+s+NOR+" </i>\u6b21",2)+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(g+"/"+w)+NOR+" </b></i>\u6b21",3)+(0==m?"":this.http_font_text("\n<i><b>(\u5b8c\u6210\u540e\u53ef\u989d\u5916\u8d2d\u4e705\u6b21)</b></i>",
2))+"</td>";a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):0==r||g<w?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7acb\u5373\u5b8c\u6210"+NOR,"vip finish_task","3")+"</td>"):a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d2d\u4e701\u6b21"+NOR,"vip buy_task","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";0<d&&g<w&&(a+="<table align='center' style='width:100%'>",a+="<tr>",
a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'></td>",a+="<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+5*F+NOR+" </b></i>\u5143\u5b9d \u9650<i> "+HIG+M+NOR+" </i>\u6b21",2)+"</td>",a+="<td style='width:5%'></td>",a+="</tr>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'></td>",a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u66b4\u51fb\u5b8c\u6210"+NOR,"vip finish_big_task","3")+"</td>",
a+="<td style='width:5%'></td>",a+="</tr>",a+="</table>",0<r&&0<g&&(a+="<table align='center' style='width:100%'>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'></td>",a+="<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+"\u8c1c\u9898\u5361"+NOR+" </b></i>x1 \u5269\u4f59<i> "+HIG+s+NOR+" </i>\u6b21",2)+"</td>",a+="<td style='width:5%'></td>",a+="</tr>",a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'></td>",
a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d2d\u4e701\u6b21"+NOR,"vip buy_task","3")+"</td>",a+="<td style='width:5%'></td>",a+="</tr>",a+="</table>"));a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u6b63\u90aa\u4efb\u52a1",3)+"</td>";a=0==m||j<x?a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+
HIG+G+NOR+" </b></i>\u5143\u5b9d",2)+"</td>"):a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+2*G*y+NOR+" </b></i>\u5143\u5b9d",2)+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(j+"/"+x)+NOR+" </b></i>\u6b21",3)+(0==m?"":this.http_font_text("\n<i><b>(\u5b8c\u6210\u540e\u53ef\u989d\u5916\u8d2d\u4e702\u6b21)</b></i>",
2))+"</td>";a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):0==m||j<x?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u6b63\u6c14\u5b8c\u6210"+NOR,"vip finish_bad 1","3")+"</td>"):a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d2d\u4e702\u6b21"+NOR,"vip buy_bad","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";if(0<d&&(0==m||j<x))a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'> </td>",
a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d1f\u6c14\u5b8c\u6210"+NOR,"vip finish_bad 2","3")+"</td>",a+="<td style='width:5%'></td>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u9003\u72af\u4efb\u52a1",3)+"</td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+
HIG+J+NOR+" </b></i>\u5143\u5b9d",2)+"</td>";a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(k+"/"+B)+NOR+" </b></i>\u6b21",3)+(0==m?"":this.http_font_text("\n<i><b>(\u5b8c\u6210\u540e\u53ef\u989d\u5916\u8d2d\u4e702\u6b21)</b></i>",2))+"</td>";a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):a+("<td style='width:45%' align='center'>"+
this.make_cmd(HIG+"\u6b63\u6c14\u5b8c\u6210"+NOR,"vip finish_taofan 1","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";if(0<d&&(0==m||k<B))a+="<tr>",a+="<td style='width:5%'></td>",a+="<td style='width:45%' align='center'> </td>",a+="<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d1f\u6c14\u5b8c\u6210"+NOR,"vip finish_taofan 2","3")+"</td>",a+="<td style='width:5%'></td>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";
a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u6311\u6218\u6392\u884c\u699c\u4efb\u52a1",3)+"</td>";a=0==m||l<z?a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+H+NOR+" </b></i>\u5143\u5b9d",2)+"</td>"):a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+2*H*y+NOR+" </b></i>\u5143\u5b9d",2)+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";
a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(l+"/"+z)+NOR+" </b></i>\u6b21",3)+(0==m?"":this.http_font_text("\n<i><b>(\u5b8c\u6210\u540e\u53ef\u989d\u5916\u8d2d\u4e702\u6b21)</b></i>",2))+"</td>";a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):0==m||l<z?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7acb\u5373\u5b8c\u6210"+NOR,"vip finish_sort","3")+"</td>"):a+("<td style='width:45%' align='center'>"+
this.make_cmd(HIG+"\u8d2d\u4e702\u6b21"+NOR,"vip buy_sort","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5bfb\u5b9d\u4efb\u52a1",3)+"</td>";a=0==m||q<A?a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+t+NOR+
" </b></i>\u5143\u5b9d",2)+"</td>"):a+("<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+2*t*y+NOR+" </b></i>\u5143\u5b9d",2)+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(q+"/"+A)+NOR+" </b></i>\u6b21",3)+(0==m?"":this.http_font_text("\n<i><b>(\u5b8c\u6210\u540e\u53ef\u989d\u5916\u8d2d\u4e702\u6b21)</b></i>",2))+"</td>";
a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):0==m||q<A?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7acb\u5373\u5b8c\u6210"+NOR,"vip finish_dig","3")+"</td>"):a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u8d2d\u4e702\u6b21"+NOR,"vip buy_dig","3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";
a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u9493\u9c7c\u4efb\u52a1",3)+"</td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+K+NOR+" </b></i>\u94f6\u4e24",2)+"</td>";a+="<td style='width:5%'></td>";a+="</tr>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u5df2\u5b8c\u6210<i><b> "+HIW+(n+"/"+C)+NOR+" </b></i>\u6b21",3)+"</td>";a=0>=
d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):0==m||n<C?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u7acb\u5373\u5b8c\u6210"+NOR,"vip finish_diaoyu","3")+"</td>"):a+"<td style='width:45%' align='center'> - </td>";a+="<td style='width:5%'></td>";a+="</tr>";a+="</table>";if((b=c.get("saodang_fb_1"))&&0<b.length){a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<table align='center' style='width:100%'>";
a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u626b\u8361\u526f\u672c",3)+"</td>";a+="<td style='width:45%' align='center'>"+this.http_font_text("\u9700\u8981<i><b> "+HIG+t+NOR+" </b></i>\u5143\u5b9d",2)+"</td>";a+="<td style='width:5%'></td>";a+="</tr>";for(t=0;10>t;t++){b=c.get("saodang_fb_"+(t+1));if(!b||0==b.length)break;f=b.split(",");if(3!=f.length)break;b=f[0];e=f[1];f=parseInt(f[2]);max_cnt=Math.floor(f/1E3);f-=1E3*max_cnt;a+="<tr>";
a+="<td style='width:5%'></td>";a+="<td style='width:45%' align='center'>"+this.http_font_text(CYN+b+NOR+"("+HIW+"<i><b> "+(f+"/"+max_cnt)+NOR+" </b></i>\u6b21)",3)+"</td>";a=0>=d?a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u5f00\u901aVIP"+NOR,"vip buy","3")+"</td>"):a+("<td style='width:45%' align='center'>"+this.make_cmd(HIG+"\u626b\u8361"+NOR,"vip finish_fb "+e,"3")+"</td>");a+="<td style='width:5%'></td>";a+="</tr>"}a+="</table>"}$("div#out").html("");g_gmain.recvNetWork(a);
return 1};this.get_vs_max_vs=function(){var c=g_obj_map.get("msg_vs_info");return c&&(c=c.get("max_vs"))?parseInt(c):4};this.get_vs_type=function(){var c=g_obj_map.get("msg_vs_info"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;for(var b,a=this.get_combat_user_id(),d=this.get_vs_max_vs(),e=1;e<=d;e++)if((b=c.get("vs1_pos"+e))&&b==a)return 1;for(e=1;e<=d;e++)if((b=c.get("vs2_pos"+e))&&b==a)return 2;return 0};this.show_html_page=function(){var c=g_obj_map.get("msg_html_page");if(!c)return 0;this.add_page("show_html_page");
var a=c.get("title");if(!a||""==a)a="\u8bba\u5251";var b;b="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";b+="<td style='width:34%' align='center'>"+this.http_font_text(HIG+a+NOR,"title")+"</td>";b+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";b+="</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(b);b="";(c=c.get("msg"))&&(b+=c);$("div#out").html("");g_gmain.recvNetWork(b);
return 1};this.show_prompt=function(){var c=g_obj_map.get("msg_prompt"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;this.add_page("prompt");var b=0,d;d="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";d+="<td style='width:34%' align='center'>"+this.http_font_text(HIG+"\u8bf7\u786e\u8ba4"+NOR,"title")+"</td>";d+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";d+="</tr></table>";
d+=this.http_hr_text();d+=""+this.http_font_text(c.get("msg"),4)+"\n";d+="</table><table align='center' style='width:100%'>";for(var e=0,f,a=1;;a++){if(!(tmpstr=c.get("cmd"+a))||!(cmd_name=c.get("cmd"+a+"_name")))if(e)break;else tmpstr="cancel_prompt",cmd_name="\u53d6\u6d88",e=1;b++;0==(b-1)%4&&(d+="<tr>");f=(f=c.get("close_after_click"+a))?parseInt(f):0;d+="<td align='center'>"+this.make_cmd(cmd_name,tmpstr,2,f?f:1)+"</td>";0==b%4&&(d+="</tr>")}0!=b%4&&(d+="</tr>");d+="</table>";$("div#out").html("");
g_gmain.recvNetWork(d);return 1};this.check_room_pos=function(c,a,b){if(this._check_rooms[""+b])return 0;this._check_rooms[""+b]=1;var b=a.x,d=a.y;if(void 0!=b&&void 0!=d){b<this._room_min_x&&(this._room_min_x=b);b>this._room_max_x&&(this._room_max_x=b);d<this._room_min_y&&(this._room_min_y=d);d>this._room_max_y&&(this._room_max_y=d);for(var e,d=0;d<g_simul_efun.g_room_exits.length;d++)b=a[g_simul_efun.g_room_exits[d]],void 0!=b&&(e=c[""+b])&&this.check_room_pos(c,e,b)}};this.show_map_fact=function(c,
a,b,d){if(this._check_rooms[""+b])return 0;this._check_rooms[""+b]=1;var e=document.getElementById("room"+a.x+"_"+a.y);if(!e)return 0;for(var f=getScreenWidth(),h=Math.floor(f/3.5-10),g=Math.floor(0.454*h),f='<button cellpadding=0 cellspacing=0 style="',b=parseInt(d.get("obj_p"))==b?"font-size: 12px;color: white;width:"+h+"px;height:"+g+"px;padding:0;margin:0;border:none;text-decoration:none;background: url("+g_img_host+"room_in.png)":"font-size: 12px;color: white;width:"+h+"px;height:"+g+"px;padding:0;margin:0;border:none;text-decoration:none;background: url("+
g_img_host+"room.png)",j,g=0;g<g_simul_efun.g_room_exits.length;g++)if(h=a[g_simul_efun.g_room_exits[g]],void 0!=h&&(j=c[""+h]))this.show_map_fact(c,j,h,d),b+=",","south"==g_simul_efun.g_room_exits[g]?b+="url("+g_img_host+"room_n.png)":"southeast"==g_simul_efun.g_room_exits[g]?b+="url("+g_img_host+"room_nw.png)":"east"==g_simul_efun.g_room_exits[g]?b+="url("+g_img_host+"room_w.png)":"northeast"==g_simul_efun.g_room_exits[g]?b+="url("+g_img_host+"room_sw.png)":"north"==g_simul_efun.g_room_exits[g]?
b+="url("+g_img_host+"room_s.png)":"northwest"==g_simul_efun.g_room_exits[g]?b+="url("+g_img_host+"room_se.png)":"west"==g_simul_efun.g_room_exits[g]?b+="url("+g_img_host+"room_e.png)":"southwest"==g_simul_efun.g_room_exits[g]&&(b+="url("+g_img_host+"room_ne.png)");f+=b+';background-repeat: no-repeat;background-size: cover;">'+a.name+"</button>";f=g_gmain.change_html(f);e.innerHTML=f;return 1};this._g_show_map_id=0;this.show_map=function(){var c=g_obj_map.get("msg_room");if(!c)return 0;if(c.get("no_map"))return g_gmain.notify_fail("\u6b64\u5173\u5361\u6ca1\u6709\u5730\u56fe\u663e\u793a\uff0c\u8fd8\u8bf7\u5927\u4fa0\u81ea\u5df1\u63a2\u7d22\u3002"),
0;var a=c.get("map_id");if(!a)return 0;var b="",d=g_obj_map.get("map_"+a);if(!d)return this._g_show_map_id!=a&&(b+="<script src='"+g_js_host+"js/map/"+a+".js'><\/script>",$("div#out").html(""),g_gmain.recvNetWork(b),this._g_show_map_id=a),setTimeout(function(){gSocketMsg.show_map()},50),1;this._g_show_map_id=0;var e=d.start_room,f;void 0!=e&&(f=d[""+e],void 0!=f&&(this._check_rooms=[],this.check_room_pos(d,f,e),this._check_rooms=0));var a=Math.abs(this._room_max_x-this._room_min_x+1),h=Math.abs(this._room_max_y-
this._room_min_y+1);this.add_page("map_info");b+="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";b+="<td style='width:34%' align='center'>"+this.http_font_text(HIG+d.map_name+NOR,"title")+"</td>";b+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";b+="</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(b);b="";if(1>a||1>h||1E3<=a||1E3<=h)return b+=this.http_font_text(HIR+
"\u6b64\u5173\u5361\u6ca1\u6709\u5730\u56fe\u663e\u793a\uff0c\u8fd8\u8bf7\u5927\u4fa0\u81ea\u5df1\u63a2\u7d22\u3002"+NOR,4),$("div#out").html(""),g_gmain.recvNetWork(b),this._check_rooms=0,this._room_min_y=this._room_min_x=1E9,this._room_max_y=this._room_max_x=-1E9,0;for(var g=getScreenWidth(),j,b=b+("<table align='center' border=0 cellpadding=0 cellspacing=0 width="+Math.floor(g/3.5-10)*a+">"),k=0;k<h;k++){for(var b=b+"<tr>",l=0;l<a;l++)g=l+this._room_min_x,j=k+this._room_min_y,b+="<td id='room"+
g+"_"+j+"'> </td>";b+="</tr>"}b+="</table>";$("div#out").html("");g_gmain.recvNetWork(b,1);$("div#out").ready(function(){gSocketMsg._check_rooms=[];gSocketMsg.show_map_fact(d,f,e,c);gSocketMsg._check_rooms=0});this._check_rooms=0;this._room_min_y=this._room_min_x=1E9;this._room_max_y=this._room_max_x=-1E9;return 1};this.show_lines_page=function(){if(!g_gmain.is_lineing)return 0;$("div#out_top").html("");var c=g_obj_map.get("msg_status");if(!c)return 0;c.get("area");var a=c.get("name"),b=c.get("host"),
d=parseInt(c.get("port")),e=getUrlAttr(document.location.href,"ws_host"),f;f="\n<table align = 'center' border=0 style='width:100%'><tr>";f+="<td style='width:33%'></td>";f+="<td style='width:34%' align='center'>"+this.http_font_text(WHT+a+NOR,"title")+"</td>";f+="<td style='width:33%' align='right'> </td>";f+="</tr></table>\n\n";var h=g_gmain.get_user_id(),g=g_gmain.get_user_pwd(),j=g_gmain.get_s_line(),k=document.location.href;if(""==j||"0"==j)j=0;if(!h||"0"==h)f+="<table align = 'center' border=0 style='width:100%'><tr>",
f+="<td style='width:100%' align='center'>",f+=this.http_font_text(HIR+"\u8ba4\u8bc1\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u6e38\u620f"+NOR,"title"),f+="</td></tr></table>";else{var l;try{l="undefined"!=typeof isWeixinBroswer&&isWeixinBroswer()}catch(q){l=0}a=g_gmain.getUrlAttr(k,"arg");if(!a||0==a.length)a=0;b+=0!=d&&80!=d?":"+d:"";try{var n=g_gmain.getMainHost(k);n&&(b=n)}catch(u){}"twan"==g_partner?l="http://"+b+"/?id="+h+"&time="+g_gmain.get_time()+"&key="+g+"&s_line=1&area="+g_gmain.getUrlAttr(k,
"area")+"&token="+g_gmain.getUrlAttr(k,"token")+"&chn="+g_gmain.getUrlAttr(k,"chn")+"&uid="+g_gmain.getUrlAttr(k,"uid")+"&juhesdk_token="+g_gmain.getUrlAttr(k,"juhesdk_token")+"&juhesdk_chn="+g_gmain.getUrlAttr(k,"juhesdk_chn")+"&juhesdk_uid="+g_gmain.getUrlAttr(k,"juhesdk_uid")+"&juhesdk_channel_id="+g_gmain.getUrlAttr(k,"juhesdk_channel_id")+"&juhesdk_channel_uid="+g_gmain.getUrlAttr(k,"juhesdk_channel_uid")+"&juhesdk_channel_token="+g_gmain.getUrlAttr(k,"juhesdk_channel_token")+"&juhesdk_channel_is_attention="+
g_gmain.getUrlAttr(k,"juhesdk_channel_is_attention"):l?(j=b.split(":"),2<=j.length&&(b=j[0]),l="http://"+b+"/?time="+g_gmain.get_time()+"&s_line=1"):(l=g_gmain.gIsAppStore||e?k:"http://"+b+"/?id="+h+"&time="+g_gmain.get_time()+"&key="+g,j||(l+="&s_line=1"));l=g_gmain.replaceDomain(l);try{"undefined"!=typeof localStorage&&(j=null,(j=localStorage.getItem("game_skin"))&&(l+="&game_skin="+j))}catch(v){}if(a)return document.location.href=l+("&arg="+a),0;f+="<table align='center' border=0 cellpadding=0 cellspacing=0 style='width:100%'>";
f+="<tr onclick=\"javascript:document.location.href='"+l+"';\">";f+="<td align='center' style='width:30%'> </td>";f+="<td align='center' style='width:40%'> "+this.http_font_text(HIG+"<b>\u8fdb\u5165\u6e38\u620f</b>"+NOR,3)+" </td>";f+="<td align='center' style='width:30%'> </td>";f+="</tr>";f+="<tr>";f+="<td align='center' style='width:30%'> </td>";f+="<td align='center' style='width:40%'> </td>";f+="<td align='center' style='width:30%'> </td>";f+="</tr>";f+="<tr>";f+="<td align='center' style='width:30%'> <a href=\"javascript:document.location.reload();\" style='color:cyan'>"+
this.http_font_text(CYN+"<b>\u68c0\u6d4b\u66f4\u65b0</b>"+NOR,2)+"</a> </td>";f+="<td align='center' style='width:40%'> </td>";f+="<td align='center' style='width:30%'> ";e||(e="http://sword.yytou.cn","undefined"!=typeof g_site_url&&(e=g_site_url),f+="<a href=\"javascript:document.location.href='"+e+"';\" style='color:cyan'>"+this.http_font_text(CYN+"<b>\u8fd4\u56de\u5b98\u7f51\u9009\u533a</b>"+NOR,2)+"</a>");f+=" </td>";f+="</tr>";f+="</table>\n"}f+="<table align='center' border=0 style='width:100%'><tr>";
"twan"==g_partner?f="undefined"!=typeof tw_qq_qun&&0!=tw_qq_qun?f+("<td style='width:45%' align='right'><b>"+this.http_font_text(HIC+"\u5ba2\u670dQQ\u7fa4 "+NOR+"<i>"+tw_qq_qun+"</i>"+CYN+" "+NOR,"small_text")+"</b></i></td>"):f+"<td style='width:45%' align='right'></td>":((e=c.get("tools"))||(e="QQ\u7fa4"),(c=c.get("qq"))||(c="468233595"),f+="<td style='width:45%' align='right'><b>"+this.http_font_text(HIC+"\u5ba2\u670d"+e+" "+NOR+""+c+""+CYN+" "+NOR,"small_text")+"</b></i></td>");f+="<td style='width:1%'></a></td>";
f+="</tr></table>";f+="\n";f+=gSocketMsg.http_hr_text();f+="\n";f+="<table align='center' border=0 style='width:100%'>";f+="<tr><td style='width:100%' align='center'>"+this.http_font_text(GRA+"\u62b5\u5236\u4e0d\u826f\u6e38\u620f\uff0c\u62d2\u7edd\u76d7\u7248\u6e38\u620f\u3002"+NOR,2)+"</td></tr>";f+="<tr><td style='width:100%' align='center'>"+this.http_font_text(GRA+"\u6ce8\u610f\u81ea\u6211\u4fdd\u62a4\uff0c\u8c28\u9632\u53d7\u9a97\u4e0a\u5f53\u3002"+NOR,2)+"</td></tr>";f+="<tr><td style='width:100%' align='center'>"+
this.http_font_text(GRA+"\u9002\u5ea6\u6e38\u620f\u76ca\u8111\uff0c\u6c89\u8ff7\u6e38\u620f\u4f24\u8eab\u3002"+NOR,2)+"</td></tr>";f+="<tr><td style='width:100%' align='center'>"+this.http_font_text(GRA+"\u5408\u7406\u5b89\u6392\u65f6\u95f4\uff0c\u4eab\u53d7\u5065\u5eb7\u751f\u6d3b\u3002"+NOR,2)+"</td></tr>";f+="</table>";$("div#out").html("");g_gmain.recvNetWork(f);return 1};this.quit_chat=function(){if(!g_gmain.is_chatting)return 0;chat(0);$("div#out_top").html("");$("div#cmd").html(cmdHtml);this.showPrev();
return 1};this.cancel_tell=function(){g_obj_map.remove("tell_to_uid");this.get_chat_bottom_msg()};this.send_chat=function(){if(g_gmain.is_chatting){var c=$("input#chat_msg");if(c){var a=c.val().trim();if(0!=a.length){var b=g_obj_map.get("tell_to_uid"),d=0,e=0;b&&(d=b.split("_U_"),2<=d.length&&(e=d[0]));e&&"tell"==this._sub_page?a="tell "+e+" "+a:"all"==this._sub_page?a="chat "+a:"clan"==this._sub_page?a="clan chat "+a:"team"==this._sub_page?a="team chat "+a:"tell"==this._sub_page?g_gmain.notify_fail("\u4f60\u8981\u4e0e\u8c01\u79c1\u804a\uff1f"):
a=this._sub_page+" "+a;c.val("");g_gmain.clickButton(a)}}}};this.get_chat_bottom_msg=function(c){var a=g_obj_map.get("tell_to_uid"),b=0,d=0,e=0,f=document.getElementById("cmd");if(!f)return 0;a&&(b=a.split("_U_"),2<=b.length&&(d=b[0],e=b[1]));a="<table align = 'center' border=0 style='width:100%'><tr>";d?(a+="<td style='width:33%' align='center'>"+this.make_cmd(this.http_font_text(e,2),"cancel_tell",3)+"</td>",a=a+"<td style='width:34%' align='center'><input id='chat_msg' class='tell_input' type='text' value=''></td>"+
("<td style='width:33%' align='center'>"+this.make_cmd(this.http_font_text("\u53d1\u9001",2),"send_chat",3)+"</td>")):(a+="<td style='width:65%' align='left'><input id='chat_msg' class='chat_input' type='text' value=''></td>",a+="<td style='width:35%' align='left'>"+this.make_cmd(this.http_font_text("\u53d1\u9001",2),"send_chat",3)+"</td>");a+="</tr></table>";a=g_gmain.change_html(a);c||(f.innerHTML=a);eval("$('input#chat_msg').keypress(function(e) {if(e.keyCode == 13) gSocketMsg.send_chat();});");
return a};this.get_have_no_chat_msg_cmd=function(c){var a,b=document.getElementById("cmd");if(!b)return 0;a="<table align = 'center' border=0 style='width:100%'><tr><td style='width:25%' align='center'><a href=\"javascript:clickButton('goscore');\"><img src=\""+g_img_host+"zhuangtai2.png\" class='mainb' alt='\u72b6\u6001'/></a></td>\n<td style='width:25%' align='center'><a href=\"javascript:clickButton('go_chat');\"><img src=\""+g_img_host+"liaotian2.png\" class='mainb' alt='\u804a\u5929'/></a></td>\n<td style='width:25%' align='center'><a href=\"javascript:clickButton('golook_room');\"><img src=\""+
g_img_host+"guancha2.png\" class='mainb' alt='\u89c2\u5bdf'/></a></td>\n<td style='width:25%' align='center'><a href=\"javascript:clickButton('home_prompt');\"><img src=\""+g_img_host+"zhuye2.png\" class='mainb' alt='\u4e3b\u9875'/></a></td></tr></table>\n";c||(b.innerHTML=a);return a};this.get_have_chat_msg_cmd=function(c){var a,b=document.getElementById("cmd");if(!b)return 0;a="<table align = 'center' border=0 style='width:100%'><tr><td style='width:25%' align='center'><a href=\"javascript:clickButton('score');\"><img src=\""+
g_img_host+"zhuangtai2.png\" class='mainb' alt='\u72b6\u6001'/></a></td>\n<td style='width:25%' align='center'><a href=\"javascript:clickButton('go_chat');\"><img src=\""+g_img_host+"liaotian3.png\" class='mainb' alt='\u804a\u5929'/></a></td>\n<td style='width:25%' align='center'><a href=\"javascript:clickButton('golook_room');\"><img src=\""+g_img_host+"guancha2.png\" class='mainb' alt='\u89c2\u5bdf'/></a></td>\n<td style='width:25%' align='center'><a href=\"javascript:clickButton('home_prompt');\"><img src=\""+
g_img_host+"zhuye2.png\" class='mainb' alt='\u4e3b\u9875'/></a></td></tr></table>\n";c||(b.innerHTML=a);return a};this.get_channel_top=function(c){var a;a="<table align = 'center' border=0 style='width:100%'><tr>"+("<td style='width:33%' align='left'><a href=\"javascript:g_gmain.clickButton('client_prompt empty_chat')\" style='text-decoration:none'><span class='out2'>"+WHT+"\u6e05\u7a7a\u4fe1\u606f"+NOR+"</span></a></td>");a+="<td style='width:34%' align='center'>"+this.http_font_text(WHT+"\u804a \u5929"+
NOR,"title")+"</td>";a+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('quit_chat')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";a=a+"</tr></table>"+("<table align = 'center' bgColor="+g_s_table_color+" border=0 cellpadding=0 cellspacing=0 style='width:100%'><tr>");a+="<td>"+this.make_cmd("\u5168\u90e8","go_chat all","all"==c?"chat_tab_click":"chat_tab")+"</td>";a+="<td>"+this.make_cmd("\u95f2\u804a","go_chat chat","chat"==c?"chat_tab_click":"chat_tab")+"</td>";
a+="<td>"+this.make_cmd("\u7cfb\u7edf","go_chat sys","sys"==c?"chat_tab_click":"chat_tab")+"</td>";a+="<td>"+this.make_cmd("\u79c1\u804a","go_chat tell","tell"==c?"chat_tab_click":"chat_tab")+"</td>";a+="<td>"+this.make_cmd("\u573a\u666f","go_chat say","say"==c?"chat_tab_click":"chat_tab")+"</td>";a+="<td>"+this.make_cmd("\u8c23\u8a00","go_chat rumor","rumor"==c?"chat_tab_click":"chat_tab")+"</td>";a+="</tr><tr>";a+="<td>"+this.make_cmd("\u5e2e\u6d3e","go_chat clan","clan"==c?"chat_tab_click":"chat_tab")+
"</td>";a+="<td>"+this.make_cmd("\u961f\u4f0d","go_chat team","team"==c?"chat_tab_click":"chat_tab")+"</td>";a+="<td>"+this.make_cmd("\u7ea2\u5305","go_chat hongbao","hongbao"==c?"chat_tab_click":"chat_tab")+"</td>";a+="<td>&nbsp;</td>";a+="<td>&nbsp;</td>";a+="<td>&nbsp;</td>";return a+="</tr></table>"};this.show_channel=function(c,a){if(!g_obj_map.get("msg_attrs"))return 0;this.add_page("chat");var b;c||(g_gmain.is_chatting&&(this.quit_chat(),this.add_page("chat")),g_obj_map.remove("tell_to_uid"),
c="all",chat(1),b=$("div#out_top"),b.html(""),b=this.get_channel_top(c),g_gmain.recvNetWorkTop(b),b=$("div#cmd"),cmdHtml||(cmdHtml=this.get_have_no_chat_msg_cmd(1)),b.html(""),this._sub_page=c,this.get_chat_bottom_msg());"all"!=c&&("chat"!=c&&"sys"!=c&&"tell"!=c&&"say"!=c&&"rumor"!=c&&"clan"!=c&&"team"!=c&&"hongbao"!=c)&&(c="all");this._sub_page!=c&&(b=$("div#out_top"),b.html(""),b=this.get_channel_top(c),g_gmain.recvNetWorkTop(b));this._sub_page=c;if(a){if("all"!=c&&a.get("subtype")!=c)return 0;
b=a.get("msg");b=this.http_font_text(b,"3_auto");var d=$("div#out"),e=d.scrollTop(),f=d.prop("scrollHeight"),e=d.height()+e>=f?1:0;g_gmain.recvNetWork(b);e&&d.scrollTop(d.prop("scrollHeight"))}else{b="";for(d=0;d<chatMsg.length;d++)"all"!=c&&chatMsg[d].get("subtype")!=c||(b+=this.http_font_text(chatMsg[d].get("msg"),"3_auto"));var d=$("div#out");d.html("");g_gmain.recvNetWork(b);d.scrollTop(d.prop("scrollHeight"))}return 1};this.show_finish_quest=function(){var c=g_obj_map.get("msg_finish_quest"),
a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;this.add_page("finish_quest_info");var b=c.get("exp"),b=b?parseInt(b):0,d=c.get("pon"),d=d?parseInt(d):0,e=c.get("money"),e=e?parseInt(e):0,a="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>",a=a+("<td style='width:34%' align='center'>"+this.http_font_text(WHT+"\u5173 \u5361"+NOR,"title")+"</td>"),a=a+("<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>"),
a=a+"</tr></table>",a=a+this.http_hr_text(),a=a+"<table align = 'center' border=0 style='width:100%'><tr>",a=a+"<td style='width:33%'></td>",a=a+("<td style='width:34%' align='center'>"+this.http_font_text(HIY+"\u5173\u5361\u6210\u529f\u901a\u5173\uff01"+NOR,"title")+"</td>"),a=a+"<td style='width:33%' align='right'> </td>",a=a+"</tr></table>",a=a+("<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>"),a=a+"<table align='center' border=0 style='width:100%'>",a=a+"<tr>",a=a+("<td style='width:50%' align='center'>"+
this.http_font_text(HIG+"\u83b7\u5f97\u7ecf\u9a8c"+NOR,4)+"</td>"),a=a+("<td style='width:50%' align='center'>"+this.http_font_text(""+b,3)+"</td>"),a=a+"</tr>",a=a+"<tr>",a=a+("<td style='width:50%' align='center'>"+this.http_font_text(HIC+"\u83b7\u5f97\u6f5c\u80fd"+NOR,4)+"</td>"),a=a+("<td style='width:50%' align='center'>"+this.http_font_text(""+d,3)+"</td>"),a=a+"</tr>",a=a+"<tr>",a=a+("<td style='width:50%' align='center'>"+this.http_font_text(HIY+"\u83b7\u5f97\u94f6\u4e24"+NOR,4)+"</td>"),
a=a+("<td style='width:50%' align='center'>"+this.http_font_text(""+e,3)+"</td>"),a=a+"</tr>",a=a+"</table>";(c=c.get("game_host"))?(c=g_simul_efun.replace_special_msg4(c),a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>",a+="<p align='center'>"+this.http_font_text(WHT+"\u8bf7\u60a8\u8bb0\u4f4f"+HIM+"\u8bba\u5251\uff1a\u6c5f\u6e56"+NOR+WHT+"\u7f51\u5740"+NOR,2)+"</p>",a+="<p align='center'>"+this.http_font_text(HIG+c+NOR,2)+"</p>",a+="<p align='center'>"+this.http_font_text(WHT+
"\u8bf7\u64cd\u4f5c\u6d4f\u89c8\u5668\u6536\u85cf\u4e66\u7b7e\uff0c\u5c06\u83b7\u5f97\u66f4\u4f18\u8d28\u6e38\u620f\u4f53\u9a8c"+NOR,2)+"</p>",a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>"):a+="\n\n";a+="<p align='center'><a href=\"javascript:clickButton('home')\" style='text-decoration:none'>"+this.http_font_text(HIG+"\u79bb\u5f00\u5173\u5361"+NOR,"big_text")+"</a></p>";$("div#out").html("");g_gmain.recvNetWork(a);return 1};this.finish_combat=function(){var c=g_obj_map.get("msg_combat_result"),
a=g_obj_map.get("msg_attrs"),b=g_obj_map.get("msg_die");if(!c&&!b||!a)return 0;g_combat_msg="";(a=g_obj_map.get("combat_text_msgs"))||(a="");gSocketMsg.quit_chat();this.remove_kee_text();g_gmain.fight(0);g_combat_chat=0;g_obj_map.remove("msg_swords");var d=-2,e,f=this.get_combat_user_id();if(c){if(e=c.get("win_uid")){e=e.split(",");for(var h=0;h<e.length;h++)f==e[h]&&(d=1)}if(-2==d&&(c=c.get("fail_uid"))){e=c.split(",");for(h=0;h<e.length;h++)f==e[h]&&(d=-1)}-2==d&&(d=2)}b&&-2==d&&b.get("id")==f&&
(d=-1);-2==d&&(d=0);this.add_page("combat_result_info");a+="<img src='"+g_img_host+"line.png' align='center' class='all_line'/><br/>";a+="\n<table align = 'center' border=0 style='width:100%'><tr>";a+="<td style='width:5%'> </td>";a+="<td style='width:90%' align='center'>"+this.http_font_text(HIY+"\u6218\u6597\u7ed3\u675f"+NOR,"big_text")+"</td>";a+="<td style='width:5%'> </td>";a+="</tr></table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";b=1==d?HIG+"\u80dc\u5229\uff01"+
NOR:0==d?HIY+"\u5e73\u5c40..."+NOR:2==d?HIC+"\u4e34\u9635\u9003\u8dd1\u4e86..."+NOR:RED+"\u6218\u8d25\u4e86..."+NOR;a+="\n";a+="<table align = 'center' style='width:100%'>";a+="<tr>";a+="<td style='width:5%'></td>";a+="<td style='width:90%' align='center'>"+this.http_font_text(b,"big_text")+"</td>";a+="<td style='width:5%'> </td>";a+="</tr>";a+="</table>";a+="<p align='center'><img src='"+g_img_host+"line.png' class='line'/></p>";a+="<p align='center'><a href=\"javascript:clickButton('prev_combat')\"><img src='"+
g_img_host+"back.png' class='prev'/></a></p>";b=$("div#out");b.html("");g_gmain.recvNetWork(a);b.scrollTop(b.prop("scrollHeight"))};this.change_kee_text_pos=function(){var c,a;if(c=g_obj_map.get("msg_vs_info"))for(var b=this.get_vs_max_vs(),d=1;2>=d;d++)for(var e=1;e<=b;e++){var f=document.getElementById("vs_hp"+d+e);if(f&&!f.change_kee_text_pos&&(a=c.get("vs"+d+"_name"+e))){a=g_simul_efun.replaceControlCharBlank(a);a=a.length;6<a&&(a=6);a=2>=a?10:10*(a-2)+10;a=""+($("#vs_hp"+d+e).position().left-
a)+"px";var h=""+($("#vs_hp"+d+e).position().top+11)+"px";f.style.position="absolute";$("#vs_hp"+d+e).css({left:a,top:h});f.change_kee_text_pos=1;a=parseInt(c.get("vs"+d+"_kee"+e));a="<i>"+HIC+a+NOR+"</i>";a=g_gmain.change_html(a);f.innerHTML=a}}};this.remove_kee_text=function(){for(var c=this.get_vs_max_vs(),a=1;2>=a;a++)for(var b=1;b<=c;b++){var d=document.getElementById("vs_hp"+a+b);d&&(d.style.display="none")}};this.g_lose_kee_p=0;this.move_lose_kee_gif=function(c){var a=document.getElementById("lose_kee_gif"+
c);if(a)if(!a.move_y||40<=a.move_y)a.parentNode.removeChild(a);else{a.move_y+=2;var b=$("#lose_kee_gif"+c);b?(a=""+b.position().left+"px",b=""+(b.position().top-2)+"px",$("#lose_kee_gif"+c).css({left:a,top:b}),setTimeout(function(){gSocketMsg.move_lose_kee_gif(c)},32)):a.parentNode.removeChild(a)}};this.lose_kee_gif=function(c,a,b){this.g_lose_kee_p++;g_gmain.recvNetWork(0<=b?"<span id='lose_kee_gif"+this.g_lose_kee_p+"' class='out3'><b> "+HIR+"-"+b+NOR+"</b></span>":"<span id='lose_kee_gif"+this.g_lose_kee_p+
"' class='out3'><b> "+HIG+"+"+-b+NOR+"</b></span>");if(b=document.getElementById("lose_kee_gif"+this.g_lose_kee_p))if(b.style.position="absolute",b.style.display="none",a=$("#vs_hp"+c+a))c=""+a.position().left+"px",a=""+(a.position().top+20)+"px",$("#lose_kee_gif"+this.g_lose_kee_p).css({left:c,top:a}),b.move_y=1,b.style.display="block",this.move_lose_kee_gif(this.g_lose_kee_p)};this.change_kee=function(c){if(!g_gmain.is_fighting||!(combat_m=g_obj_map.get("msg_vs_info"))||!this.get_vs_type())return 0;
var a,b,d,e,f;b=c.get("rvid");e=parseInt(c.get("kee"));f=parseInt(c.get("lose_kee"));var c=(a=c.get("max_kee"))?parseInt(a):0,h=this.get_vs_max_vs();for(a=1;a<=h;a++)if((d=combat_m.get("vs1_pos_v"+a))&&b==d){combat_m.put("vs1_kee"+a,e);0<c&&combat_m.put("vs1_max_kee"+a,c);b=parseInt(combat_m.get("vs1_max_kee"+a));d=0>=b?0:100*e/b;100<d&&(d=100);b="vader1"+a;g_obj_map.get(b).mover(d);b=document.getElementById("vs_hp1"+a);if(!b)return 1;e="<i>"+HIC+e+NOR+"</i>";e=g_gmain.change_html(e);b.innerHTML=
e;this.lose_kee_gif(1,a,f);return 1}for(a=1;a<=h;a++)if((d=combat_m.get("vs2_pos_v"+a))&&b==d){combat_m.put("vs2_kee"+a,e);0<c&&combat_m.put("vs1_max_kee"+a,c);b=parseInt(combat_m.get("vs2_max_kee"+a));d=0>=b?0:100*e/b;100<d&&(d=100);b="vader2"+a;g_obj_map.get(b).mover(d);b=document.getElementById("vs_hp2"+a);if(!b)return 1;e="<i>"+HIC+e+NOR+"</i>";e=g_gmain.change_html(e);b.innerHTML=e;this.lose_kee_gif(2,a,f);return 1}};this.change_force=function(c){if(!g_gmain.is_fighting||!(combat_m=g_obj_map.get("msg_vs_info"))||
!this.get_vs_type())return 0;var a,b,d;a=c.get("vid");d=parseInt(c.get("force"));parseInt(c.get("lose_force"));for(var e=this.get_vs_max_vs(),c=1;c<=e;c++)if((b=combat_m.get("vs1_pos_v"+c))&&a==b)return combat_m.put("vs1_force"+c,d),a=parseInt(combat_m.get("vs1_max_force"+c)),d=0>=a?0:100*d/a,100<d&&(d=100),c="obi1"+c,g_obj_map.get(c).mover(d),1;for(c=1;c<=e;c++)if((b=combat_m.get("vs2_pos_v"+c))&&a==b)return combat_m.put("vs2_force"+c,d),a=parseInt(combat_m.get("vs2_max_force"+c)),d=0>=a?0:100*d/
a,100<d&&(d=100),c="obi2"+c,g_obj_map.get(c).mover(d),1};this.refresh_combat=function(c){var a,b,d=g_obj_map.get("msg_vs_info");if(!d)return 0;var e,f,h,g,j,k=this.get_vs_max_vs();for(b=1;2>=b;b++)for(a=1;a<=k;a++){if(f=d.get("vs"+b+"_pos_v"+a)){if(!(e=c.get("vs"+b+"_pos_v"+a))){document.getElementById("vs"+b+a).innerHTML=" ";continue}if(e==f)continue}c.get("vs"+b+"_pos"+a)&&(e=c.get("vs"+b+"_name"+a),parseInt(c.get("vs"+b+"_lvl"+a)),c.get("vs"+b+"_pos_v"+a),f=parseInt(c.get("vs"+b+"_kee"+a)),h=parseInt(c.get("vs"+
b+"_max_kee"+a)),g=parseInt(c.get("vs"+b+"_force"+a)),j=parseInt(c.get("vs"+b+"_max_force"+a)),parseInt(c.get("vs"+b+"_xdz"+a)),f=0>=h?0:100*f/h,100<f&&(f=100),j=0>=j?0:100*g/j,100<j&&(j=100),g="vader"+b+a,e+="<span id='vs_hp"+b+a+"' class='outkee_text'></span>",e+='<div class="progress" id="'+g+'"></div>',script1="var "+g+'=$("#'+g+'").ProgressBarWars({porcentaje:'+f+',estilo:"'+g+"\"});g_obj_map.put('"+g+"', "+g+");",g="obi"+b+a,e+='<div class="progress" id="'+g+'"></div>',script2="var "+g+'=$("#'+
g+'").ProgressBarWars({porcentaje:'+j+',estilo:"'+g+"\"});g_obj_map.put('"+g+"', "+g+");",e=g_gmain.change_html(e),document.getElementById("vs"+b+a).innerHTML=e,eval(script1),eval(script2))}return 1};this.get_vs_msg=function(c,a){var b;b="<table align = 'center' style='width:100%'><tr>";var d,e,f,h,g,j,k=this.get_vs_max_vs();for(d=1;d<=k;d++)1<d&&0==(d-1)%4&&(b+="</tr><tr>"),c.get("vs"+a+"_pos"+d)?(e=c.get("vs"+a+"_name"+d),parseInt(c.get("vs"+a+"_lvl"+d)),c.get("vs"+a+"_pos_v"+d),f=parseInt(c.get("vs"+
a+"_kee"+d)),h=parseInt(c.get("vs"+a+"_max_kee"+d)),g=parseInt(c.get("vs"+a+"_force"+d)),j=parseInt(c.get("vs"+a+"_max_force"+d)),parseInt(c.get("vs"+a+"_xdz"+d)),f=0>=h?0:100*f/h,100<f&&(f=100),j=0>=j?0:100*g/j,100<j&&(j=100),g="vader"+a+d,b+="<td id='vs"+a+d+"' style='width:25%'>",b+=e,b+="<span id='vs_hp"+a+d+"' class='outkee_text'></span>",b+='<div class="progress" id="'+g+'"></div><script>var '+g+'=$("#'+g+'").ProgressBarWars({porcentaje:'+f+',estilo:"'+g+"\"});g_obj_map.put('"+g+"', "+g+");<\/script>",
g="obi"+a+d,b+='<div class="progress" id="'+g+'"></div><script>var '+g+'=$("#'+g+'").ProgressBarWars({porcentaje:'+j+',estilo:"'+g+"\"});g_obj_map.put('"+g+"', "+g+");<\/script>",b+="</td>"):b+="<td id='vs"+a+d+"' style='width:25%'> </td>";return b+="</tr></table>"};this.combat_write_top=function(c,a){var b;c||(c=g_obj_map.get("msg_vs_info"));a||(a=this.get_vs_type());if(!c||!a)return 0;b=this.get_vs_msg(c,1==a?2:1);$("div#out_top").html("");g_gmain.recvNetWorkTop(b);this.change_kee_text_pos();return 1};
this.combat_write_bottom=function(c,a){var b,d=g_obj_map.get("msg_attrs");c||(c=g_obj_map.get("msg_vs_info"));a||(a=get_vs_type());if(!c||!a||!d)return 0;b=this.get_vs_msg(c,a);b+="<table align = 'center' border=0 style='width:100%'><tr>";b+="<td id='skill_1' align='center' style='width:25%'>"+this.make_cmd("","","skill_button",0)+"</td>";b+="<td id='skill_2' align='center' style='width:25%'>"+this.make_cmd("","","skill_button",0)+"</td>";b+="<td id='skill_3' align='center' style='width:25%'>"+this.make_cmd("",
"","skill_button",0)+"</td>";b+="<td id='skill_4' align='center' style='width:25%'>"+this.make_cmd("","","skill_button",0)+"</td>";b+="</tr>";b+="</table>";b+="<table align = 'center' border=0 cellpadding=10 cellspacing=0 style='width:100%'>";b+="<tr>";d=parseInt(d.get("auto_fight"));b+="<td id='combat_auto_fight' style='width:30%'>"+this.make_cmd("",0<d?"auto_fight 0":"auto_fight 1",0<d?"combat_auto_fight":"combat_no_auto_fight",0);b+="</td>";b+="<td id='combat_xdz' style='width:40%'>";var d=this.get_xdz(),
e=this.get_max_xdz(),f=100*d/e;100<f&&(f=100);b+="<table align='center' border=0 cellpadding=0 cellspacing=0 style='width:100%'>";b+="<tr onclick=\"clickButton('combat_chat');\"><td>";b+='<div class="progress" id="xdz_bar"></div><script>var xdz_bar=$("#xdz_bar").ProgressBarWars({tiempo:1,porcentaje:'+f+",estilo:\"xdz_bar\"});g_obj_map.put('xdz_bar', xdz_bar);<\/script>";b+="</td></tr>";b+="<tr onclick=\"clickButton('combat_chat');\"><td align='center' id='combat_xdz_text'>";b+=this.http_font_text(HIG+
d+"/"+e+NOR,2);b+="</td></tr>";b+="</table>";b+="</td>";b+="<td id='combat_byebye' align='center' style='width:30%'>"+this.make_cmd("","escape","combat_byebye",0)+"</td>";b+="</tr>";b+="</table>";$("div#out2").html("");g_gmain.recvNetWorkBottom(b);this.change_kee_text_pos();return 1};this.change_skill_button=function(c,a){var b=g_obj_map.get("msg_vs_info"),d=g_obj_map.get("msg_attrs");if(!b||!d)return 0;if(a)return g_obj_map.remove("skill_button"+a),1;if(this.get_combat_user_id()!=c.get("uid"))return 0;
b=parseInt(c.get("pos"));if(0>=b||4<b)return 0;c.random_elements();g_obj_map.put("skill_button"+b,c);this.refresh_skill_button()};this.refresh_skill_button=function(){if(!g_gmain.is_fighting)return 0;for(var c,a,b=this.get_xdz(),d=1;4>=d;d++)(c=g_obj_map.get("skill_button"+d))?(a=parseInt(c.get("xdz")),b>=a?(c=HIG+c.get("name")+NOR,a="playskill "+d):((c=c.get("name"))&&(c=g_simul_efun.replaceControlCharBlank(c)),c=WHT+c+NOR,a="")):(c=" ",a=""),c=this.make_cmd(c,a,"skill_button",0),c=g_gmain.change_html(c),
document.getElementById("skill_"+d).innerHTML=c};this.get_xdz=function(){var c=g_obj_map.get("msg_vs_info"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;a=this.get_vs_type();if(!a)return 0;for(var b=this.get_combat_user_id(),d,e=this.get_vs_max_vs(),f=1;f<=e;f++)if((d=c.get("vs"+a+"_pos"+f))&&b==d)return parseInt(c.get("vs"+a+"_xdz"+f));return 0};this.get_max_xdz=function(){var c=g_obj_map.get("msg_vs_info"),a=g_obj_map.get("msg_attrs");if(!c||!a)return this._max_xdz;a=this.get_vs_type();if(!a)return this._max_xdz;
for(var b=this.get_combat_user_id(),d,e=this.get_vs_max_vs(),f=1;f<=e;f++)if((d=c.get("vs"+a+"_pos"+f))&&b==d)return parseInt(c.get("vs"+a+"_max_xdz"+f));return this._max_xdz};this.change_xdz=function(c){var a=g_obj_map.get("msg_vs_info"),b=g_obj_map.get("msg_attrs");if(!a||!b)return 0;var d=this.get_vs_type();if(!d)return 0;for(var e=this.get_combat_user_id(),f,b=this.get_max_xdz(),h=this.get_vs_max_vs(),g=1;g<=h;g++)if((f=a.get("vs"+d+"_pos"+g))&&e==f)return a.put("vs"+d+"_xdz"+g,c),a=100*c/b,100<
a&&(a=100),g_gmain.is_fighting&&(xdz_bar.mover(a),a=this.http_font_text(HIG+c+"/"+b+NOR,2),a=g_gmain.change_html(a),document.getElementById("combat_xdz_text").innerHTML=a),this.refresh_skill_button(),c;return 0};this.go_combat=function(){var c=g_obj_map.get("msg_vs_info"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;a=this.get_vs_type();if(!a)return 0;var b=this.get_vs_max_vs();g_gmain.fight(4<b?2:1);this.combat_write_top(c,a);this.combat_write_bottom(c,a);c=$("div#out");c.html("");g_combat_msg&&
(g_gmain.recvNetWork(g_combat_msg),g_combat_msg="",c.scrollTop(c.prop("scrollHeight")))};this.get_combat_user_id=function(){var c=g_obj_map.get("msg_vs_info"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;var b;return(b=c.get("is_watcher"))?b:a.get("id")};this.change_room_object=function(c){var a=c.get("type"),b=c.get("subtype");if("jh"!=a)return 0;a=g_obj_map.get("msg_room");if(!a)return 0;var d,e,f=c.get("id");if("new_user"==b){for(b=1;e=a.get("user"+b);b++)if(list=e.split(","),!(3>list.length)&&
(d=list[0],d==f))return 1;a.put("user"+b,f+","+c.get("name")+",0")}else if("new_npc"==b){for(b=1;a.get("npc"+b);b++);a.put("npc"+b,f+","+c.get("name")+",0")}else if("new_item"==b){for(b=1;e=a.get("item"+b);b++)if(list=e.split(","),!(3>list.length)&&(d=list[0],d==f))return 1;a.put("item"+b,f+","+c.get("name")+","+c.get("amount"))}else if("new_cmd"==b){for(b=1;a.get("cmd"+b);b++);a.put("cmd"+b,c.get("cmd"));a.put("cmd"+b+"_name",c.get("name"))}else if("dest_user"==b)for(var h=0,b=1;e=a.get("user"+b);b++)list=
e.split(","),3>list.length||(d=list[0],h?(a.put("user"+(b-1),e),a.remove("user"+b)):d==f&&(a.remove("user"+b),h=1));else if("dest_npc"==b){h=0;for(b=1;e=a.get("npc"+b);b++)list=e.split(","),3>list.length||(d=list[0],h?(a.put("npc"+(b-1),e),a.remove("npc"+b)):d==f&&(a.remove("npc"+b),h=1))}else if("dest_item"==b){h=0;for(b=1;e=a.get("item"+b);b++)list=e.split(","),3>list.length||(d=list[0],h?(a.put("item"+(b-1),e),a.remove("item"+b)):d==f&&(a.remove("item"+b),h=1))}else if("dest_cmd"==b){h=0;f=c.get("cmd");
for(b=1;d=a.get("cmd"+b);b++)h?(a.put("cmd"+(b-1),d),a.put("cmd"+(b-1)+"_name",a.get("cmd"+b+"_name")),a.remove("cmd"+b),a.remove("cmd"+b+"_name")):d==f&&(a.remove("cmd"+b),a.remove("cmd"+b+"_name"),h=1)}"look_room"==this._current_page&&!g_gmain.is_fighting&&this.show_room();return 1};this.show_pay_return=function(){var c=g_obj_map.get("msg_pay_return_list"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;gSocketMsg.add_page("pay_return");gSocketMsg.remove_page("xf_shop");gSocketMsg.remove_page("shops");
gSocketMsg.remove_page("score_shop");var a="",b=c.get("period");b||(b="\u5f53\u65e5");a+="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%' align='left'> </td>";a+="<td style='width:34%' align='center'>"+gSocketMsg.http_font_text(WHT+"\u79ef\u5206\u5546\u57ce"+NOR,"title")+"</td>";a+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>";a+="</tr></table>";a+="<table align = 'center' bgColor="+
g_s_table_color+" border=0 cellpadding=0 cellspacing=0 style='width:100%' ><tr>";if("undefined"==typeof g_version_tw||!g_version_tw)a+="<td align = 'center' style='width:25%'>"+gSocketMsg.make_cmd("\u5145\u503c\u8fd4\u5229","","i")+"</td>";a+="<td align = 'center' style='width:25%'>"+gSocketMsg.make_cmd("\u5145\u503c\u79ef\u5206","shop score_shop","j")+"</td>";a+="<td align = 'center' style='width:25%'>"+gSocketMsg.make_cmd("\u6d88\u8d39\u79ef\u5206","shop xf_shop","j")+"</td>";a+="<td align = 'center' style='width:25%'>"+
gSocketMsg.make_cmd(CYN+"<strong>\u5145 \u503c</strong>"+NOR,"gopay","j")+"</td>";a+="</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(a);var d=0;"undefined"!=typeof g_version_tw&&g_version_tw&&(d=1);var a="<table align='center' style='width:100%'>",a=a+"<tr>",a=a+"<td style='width:5%'></td>",a=a+("<td style='width:45%' align='left'><a href=\"javascript:gSocketMsg.go_pay()\" style='text-decoration:none' style='text-decoration:none'><b>"+gSocketMsg.http_font_text("+"+b+"\u5df2\u5145\u503c "+
HIM+c.get("cz")+NOR+(d?" \u5143\u5b9d":" \u5143"),2)+"</b></a></td>"),a=a+"<td style='width:45%'></td>",a=a+"<td style='width:5%'></td>",a=a+"</tr>",a=a+"</table>",e,f,h,a=a+"<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";for(i=1;;i++){e=c.get("fanlicz"+i);if(!e)break;desc=b+"\u7d2f\u79ef\u5145\u503c "+YEL+e+NOR+(d?" \u5143\u5b9d":" \u5143");f="\u53ef\u4ee5\u83b7\u5f97\u8fd4\u5229 "+YEL+c.get("fanli"+i)+NOR+" \u5143\u5b9d";h=HIG+"\u9886\u53d6"+
NOR;a+="<tr bgColor="+g_table_color+" onclick=\"clickButton('vip fanli_go "+e+"');\">";a+="<td style='width:40%;WORD-WRAP:break-word' align='center'>"+gSocketMsg.http_font_text(desc,2)+"</td>";a+="<td style='width:40%;WORD-WRAP:break-word' align='left'>"+gSocketMsg.http_font_text(f,2)+"</td>";a+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+gSocketMsg.http_font_text(h,2)+"</td>";a+="</tr>";a+="<tr><td> </td><td> </td><td> </td></tr>"}a+="</table>";a+="<table align='center' style='width:100%'>";
a+="<tr>";a+="<td style='width:100%' align='center'>"+gSocketMsg.http_font_text(CYN+"<b>\u7d2f\u79ef\u5145\u503c\u53ea\u6709"+b+"\u6709\u6548\uff0c\u8bf7\u5728"+b+"\u53ca\u65f6\u9886\u53d6\u5145\u503c\u8fd4\u5229\uff0c\u8fc7\u65f6\u4e0d\u8865</b>"+NOR,2)+"</td>";a+="</tr>";a+="<tr>";a+="<td style='width:100%' align='center'>"+gSocketMsg.http_font_text(CYN+"<b>\u6309\u7167"+b+"\u5145\u503c\u603b\u989d\u9886\u53d6\u76f8\u5e94\u6863\u6570\u5956\u52b1\uff0c\u4e0d\u53ef\u53e0\u52a0\u9886\u53d6</b>"+NOR,
2)+"</td>";a+="</tr>";a+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(a);c.scrollTop(0);return 1};this.show_item_info=function(){return gSocketMsg2.show_item_info()};this.show_items=function(){return gSocketMsg2.show_items()};this.show_enable_info=function(){return gSocketMsg2.show_enable_info()};this.show_enables=function(){return gSocketMsg2.show_enables()};this.show_sort_info=function(c){return gSocketMsg2.show_sort_info(c)};this.show_sorts=function(c){return gSocketMsg2.show_sorts(c)};
this.go_pay=function(){return gSocketMsg2.go_pay()};this.show_shop_info=function(){return gSocketMsg2.show_shop_info()};this.show_shops=function(){return gSocketMsg2.show_shops()};this.show_buy_info=function(){return gSocketMsg2.show_buy_info()};this.show_buys=function(){return gSocketMsg2.show_buys()};this.show_skill_info=function(){return gSocketMsg2.show_skill_info()};this.show_skills=function(c,a){return gSocketMsg2.show_skills(c,a)};this.show_master_skills=function(c){return gSocketMsg2.show_master_skills(c)};
this.show_work=function(){try{return gSocketMsg2.show_work()}catch(c){alert(c)}};this.jh_select=function(){return gSocketMsg2.jh_select()};this.fb_select=function(){return gSocketMsg2.fb_select()};this.rank_select=function(){return gSocketMsg2.rank_select()};this.skin_select=function(){return gSocketMsg2.skin_select()};this.show_jh_list=function(){return gSocketMsg2.show_jh_list()};this.show_fb_list=function(){return gSocketMsg2.show_fb_list()};this.show_user=function(){return gSocketMsg2.show_user()};
this.show_item=function(){return gSocketMsg2.show_item()};this.show_npc=function(){return gSocketMsg2.show_npc()};this.show_score=function(){return gSocketMsg2.show_score()};this.show_score_info=function(){return gSocketMsg2.show_score_info()};this.show_room=function(){return gSocketMsg2.show_room()};this._now_find_road_obj_p=0;this.go_find_road=function(c,a,b,d,e){return gSocketMsg2.go_find_road(c,a,b,d,e)};this.go_home=function(){return gSocketMsg2.go_home()};this.show_family_info=function(c){return gSocketMsg2.show_family_info(c)};
this.checkCmd=function(c){return gSocketMsg2.checkCmd(c)};this.show_digs=function(){return gSocketMsg2.show_digs()};this.show_day_pay=function(){var c=g_obj_map.get("msg_day_pay"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;gSocketMsg.add_page("day_pay");var b;b="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";b+="<td style='width:34%' align='center'>"+gSocketMsg.http_font_text("\u6bcf\u65e5\u5145\u503c\u5956\u52b1","title")+"</td>";b+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+
g_img_host+"back.png' class='prev'/></a></td>";b+="</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(b);var d=parseInt(c.get("cz")),e=parseInt(c.get("rst")),f=parseInt(c.get("day_pay")),h=parseInt(c.get("can_sc_cz")),g=c.get("segs"),j="\u5143",k=0;"undefined"!=typeof g_version_tw&&g_version_tw&&(k=1,j="\u5143\u5b9d");g=g&&0<g.length?g.split(","):[];b="<p align='center'>\u6bcf\u65e5\u5145\u503c\uff0c\u90fd\u53ef\u4ee5\u9886\u53d6\u5956\u52b1\u3002\u4ee5\u4e0b\u5956\u52b1\u53ef\u4ee5\u5206\u522b\u9886\u53d6\u3002</p>";
b+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";b+="<tr>";b+="<td style='width:100%' align='center'>"+gSocketMsg.http_font_text("\u4eca\u65e5\u5df2\u5145\u503c"+d+j+(0<e?"\uff0c\u5df2\u91cd\u7f6e"+e+j:""),2)+"</td>";b+="</tr>";1<h&&(b+="<tr>",b+="<td style='width:100%' align='center'>"+gSocketMsg.http_font_text("\u8fd8\u6709 "+g_simul_efun.getStringTm(h,3)+" \u53ef\u4ee5\u83b7\u5f97\u9996\u5145\u91cd\u7f6e\u5361",2)+"</td>",b+="</tr>");b+="</table>";
a.get("rank");b+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";for(var l,d=1,e=0;e<g.length;e++)if(j=g[e],a=c.get(j))h=parseInt(j),l=parseInt(c.get(j+"_b")),l=1<<l-1,h=k?"\u5145\u503c"+10*h+"\u5143\u5b9d":"\u5145\u503c"+h+"\u5143",0==(f&l)?(j="vip day_pay_go "+j,l=HIG+"\u9886\u53d6"+NOR,d=0):(j="",l="...",e==g.length-1&&d&&(j="vip day_pay_reset",l=HIR+"\u91cd\u7f6e"+NOR)),b+="<tr bgColor="+g_table_color+">",b+="<td style='width:20%;WORD-WRAP:break-word' align='center'>"+
YEL+gSocketMsg.http_font_text(h,2)+NOR+"</td>",b+="<td style='width:50%;WORD-WRAP:break-word' align='left'>"+gSocketMsg.http_font_text(a,2)+"</td>",b+="<td style='width:30%;WORD-WRAP:break-word' align='center'>"+this.make_cmd(l,j,"3")+"</td>",b+="</tr>",b+="<tr><td></td><td></td><td></td></tr>";b+="</table>";b+="<table align='center' style='width:100%'>";b+="<tr>";b+="<td style='width:100%' align='center'>"+gSocketMsg.http_font_text(HIR+"<b>\u6ce8\uff1a\u5f53\u65e5\u5145\u503c\u603b\u989d\u5c06\u5728\u6bcf\u5929\u7684\u51cc\u66686\u70b9\u91cd\u7f6e</b>"+
NOR,2)+"</td>";b+="</tr>";b+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(b);c.scrollTop(0);return 1};this.show_chengzhang=function(){var c=g_obj_map.get("msg_chengzhang"),a=g_obj_map.get("msg_attrs");if(!c||!a)return 0;gSocketMsg.add_page("chengzhang");var b;b="<table align = 'center' border=0 style='width:100%'><tr><td style='width:33%'></td>";b+="<td style='width:34%' align='center'>"+gSocketMsg.http_font_text("\u6210\u957f\u8ba1\u5212","title")+"</td>";b+="<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+
g_img_host+"back.png' class='prev'/></a></td>";b+="</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(b);var d=parseInt(c.get("cz")),e=parseInt(c.get("cz_days"));parseInt(c.get("get_czed"));b="<p align='center'>\u8d2d\u4e70\u6210\u957f\u8ba1\u5212\uff0c1\u5468\u4ee5\u5185\u6bcf\u5929\u90fd\u53ef\u9886\u53d6\u5927\u91cf\u5956\u52b1\uff01</p>";0==d&&(b+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",b+="<tr>",b+="<td style='width:45%' align='right'>"+
this.make_cmd(HIG+"\u7acb\u5373\u8d2d\u4e70"+NOR,"vip chengzhang_buy","3")+"</td>",b+="<td style='width:45%' align='left'>(\u9700\u89811000\u5143\u5b9d)</td>",b+="</tr>",b+="</table>");var f;a.get("rank");b+="<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>";for(a=1;;a++){f=c.get("day"+a);if(!f)break;var h,g;0==d?(h=GRA+"..."+NOR,g=""):e==a-1?(h=HIG+"\u9886\u53d6"+NOR,g="vip chengzhang_go"):(h=e>=a?GRA+"\u5df2\u7ecf\u9886\u53d6"+NOR:GRA+"\u6539\u65e5\u9886\u53d6"+
NOR,g="");b+="<tr bgColor="+g_table_color+">";b+="<td style='width:10%;WORD-WRAP:break-word' align='center'>"+YEL+gSocketMsg.http_font_text("\u7b2c"+a+"\u5929",2)+NOR+"</td>";b+="<td style='width:60%;WORD-WRAP:break-word' align='left'>"+gSocketMsg.http_font_text(f,2)+"</td>";b+="<td style='width:30%;WORD-WRAP:break-word' align='center'>"+this.make_cmd(h,g,"3")+"</td>";b+="</tr>";b+="<tr><td></td><td></td><td></td></tr>"}b+="</table>";c=$("div#out");c.html("");g_gmain.recvNetWork(b);c.scrollTop(0);
return 1};this.show_cangjianlou=function(){function c(b){var c,g;b<=e?f<b?f==b-1?(c=HIG+"\u9886\u53d6\u5956\u52b1"+NOR,g=j+" get",k=HIG+"\u53ef\u4ee5\u9886\u53d6\u6b64\u697c\u5956\u52b1"+NOR):(c=GRA+"\u7b49\u5f85\u9886\u53d6"+NOR,g="",k="\u7b49\u5f85\u9886\u53d6\u6b64\u697c\u5956\u52b1"):(c=HIW+"\u91cd\u65b0\u6311\u6218"+NOR,g=j+" kill "+b,k="\u5df2\u7ecf\u9886\u53d6\u6b64\u697c\u5956\u52b1"):e==b-1?(c=RED+"\u95ef\u5173"+NOR,g=j+" kill",k=RED+"\u53ef\u4ee5\u95ef\u5173\u6b64\u697c"+NOR):(c=GRA+"..."+
NOR,g="",k="\u6b64\u697c\u5c1a\u672a\u95ef\u8fc7");var h=a.get("desc_"+b);h&&(k+=" "+h);d+="<tr bgColor="+g_table_color+">";d+="<td style='width:10%;WORD-WRAP:break-word' align='center'>"+YEL+gSocketMsg.http_font_text("\u7b2c"+b+"\u697c",2)+NOR+"</td>";d+="<td style='width:60%;WORD-WRAP:break-word' align='center'>"+gSocketMsg.http_font_text(k,2)+"</td>";d+="<td style='width:30%;WORD-WRAP:break-word' align='center'>"+gSocketMsg.make_cmd(c,g,"3")+"</td>";d+="</tr>";d+="<tr><td></td><td></td><td></td></tr>"}
var a=g_obj_map.get("msg_cangjianlou"),b=g_obj_map.get("msg_attrs");if(!b)return 0;if(!a)return g_gmain.clickButton("cangjian"==this._cangjian_type?"cangjian":"xueyin_shenbinggu "+this._cangjian_type),0;b=parseInt(b.get("lvl"));gSocketMsg.add_page("cangjianlou");gSocketMsg.remove_page("jh_list");gSocketMsg.remove_page("jh_select");gSocketMsg.remove_page("fb_select");gSocketMsg.remove_page("fb_list");var d="",d=d+"<table align = 'center' border=0 style='width:100%'><tr>",d=d+"<td style='width:33%'></td>",
d=d+("<td style='width:34%' align='center'>"+gSocketMsg.http_font_text("\u6c5f \u6e56","title")+"</td>"),d=d+("<td style='width:33%' align='right'><a href=\"javascript:clickButton('prev')\"><img src='"+g_img_host+"back.png' class='prev'/></a></td>"),d=d+"</tr></table>",d=d+("<table align = 'center' bgColor="+g_s_table_color+" border=0 cellpadding=0 cellspacing=0 style='width:100%' ><tr>"),d=d+("<td align = 'center' style='width:25%'>"+gSocketMsg.make_cmd("\u6c5f\u6e56","jh","j")+"</td>"),d=150<=b?
d+("<td align = 'center' style='width:25%'>"+gSocketMsg.make_cmd("\u95ef\u697c","","i")+"</td>"):d+"<td align = 'center' style='width:25%'> </td>",d=200<=b?d+("<td align = 'center' style='width:25%'>"+gSocketMsg.make_cmd("\u526f\u672c","fb","j")+"</td>"):d+"<td align = 'center' style='width:25%'> </td>",d=d+"<td align = 'center' style='width:25%'></td>",d=d+"</tr></table>";$("div#out_top").html("");g_gmain.recvNetWorkTop(d);var e=parseInt(a.get("p")),f=parseInt(a.get("day_p")),b=parseInt(a.get("max_p")),
h=a.get("name"),g=a.get("lou_type");this._cangjian_type=g;for(var j="cangjian"==g?"cangjian":"xueyin_shenbinggu "+g,d="",d=d+"<table align = 'center' border=0 cellpadding=0 cellspacing=0 style='width:100%' ><tr><td> </td><td> </td><td> </td><td> </td><td> </td></tr><tr>",d=d+("<td align = 'center' style='width:20%'>"+gSocketMsg.make_cmd("\u85cf\u5251\u697c","cangjian"==g?"":"cangjian","cangjian"==g?"chat_tab_click":"chat_tab")+"</td>"),d=d+("<td align = 'center' style='width:20%'>"+gSocketMsg.make_cmd("\u9738\u5200\u4e0d\u4e16\u697c",
"blade"==g?"":"xueyin_shenbinggu blade","blade"==g?"chat_tab_click":"chat_tab")+"</td>"),d=d+("<td align = 'center' style='width:20%'>"+gSocketMsg.make_cmd("\u94c1\u62f3\u767e\u4f24\u9635","unarmed"==g?"":"xueyin_shenbinggu unarmed","unarmed"==g?"chat_tab_click":"chat_tab")+"</td>"),d=d+("<td align = 'center' style='width:20%'>"+gSocketMsg.make_cmd("\u5929\u673a\u60ca\u98ce\u9601","throwing"==g?"":"xueyin_shenbinggu throwing","throwing"==g?"chat_tab_click":"chat_tab")+"</td>"),d=d+"<td align = 'center' style='width:20%'> </td>",
d=d+"</tr><tr><td> </td><td> </td><td> </td><td> </td><td> </td></tr></table>",d=d+"<table align = 'center' style='width:100%;border-style:none;border-width:0px;TABLE-LAYOUT:fixed;'>",d=d+"<tr>",d=d+"<td style='width:10%;WORD-WRAP:break-word' align='center'> </td>",d=d+("<td style='width:60%;WORD-WRAP:break-word' align='center'>"+gSocketMsg.http_font_text("\u6311\u6218"+h+"\uff0c\u6bcf\u4e00\u5c42\u90fd\u6709\u5956\u52b1\uff01",2)+"</td>"),d=d+"<td style='width:30%;WORD-WRAP:break-word' align='center'>",
d=0<e&&f<e?d+this.make_cmd(HIG+"\u4e00\u952e\u9886\u53d6"+NOR,j+" get_all","3"):d+this.make_cmd(GRA+"\u4e00\u952e\u9886\u53d6"+NOR,"","3"),d=d+"</td>",d=d+"</tr>",d=d+"<tr><td></td><td></td><td></td></tr>",d=d+"</table>",k,d=d+"<table align = 'center' style='width:100%;border-style:solid;border-width:0px;TABLE-LAYOUT:fixed;'>",h=f+1;h<=b;h++)c(h);for(h=1;h<=f;h++)c(h);d+="</table>";$("div#out").html("");g_gmain.recvNetWork(d);return 1}}var gSocketMsg=new webSocketMsg;
